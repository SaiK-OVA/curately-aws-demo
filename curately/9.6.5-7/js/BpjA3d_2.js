import{L as h,r as n,k as e,D as Y,I as M,n as ee,o as ae,S as x,U as te,B as P,V as l,W as g,A as m,O as T,T as se,b1 as le}from"./Da4I77gy.js";import{L as oe,D as ie,E as re}from"./D4E8Ilzm.js";import{D as de}from"./BM75X-kx.js";import{S as ne}from"./BcvtPrAc.js";import{M as ue}from"./DCKGuMgj.js";import{u as ce}from"./D7ld7k1a.js";import{c as me,d as ye,a as E,h as he}from"./BRh2WteL.js";import{A as fe,D as $,l as be}from"./Bu7qOu7j.js";import{E as pe}from"./MGFt9yJK.js";import{D as Ne}from"./BtfZ3YdN.js";import{T as ge,I as De}from"./DrwwBJQC.js";import{F as He,S as Ce}from"./DR5LSZrV.js";import{M as L}from"./YFmo1cJD.js";import{C as xe}from"./CYG5EPlH.js";import{S as Se}from"./DRaa5a1K.js";import{T as z}from"./D8Uve2Qz.js";import"./DGAwO83Z.js";import"./BAhGwoeq.js";import"./DKbR-AmK.js";import"./CNGds3kx.js";import"./CTncTM4t.js";import"./Dw4YnGpZ.js";import"./DtpZK6Fd.js";import"./Cb9wbhoa.js";import"./BSRMXGwI.js";import"./M012vGJb.js";import"./Ca_RVXIc.js";import"./DGhwAF8n.js";import"./Bt1msObo.js";import"./DVcNEn01.js";import"./DwQ4byYi.js";import"./Bob0wRh9.js";import"./Bfaybex0.js";const ve=({open:A,handleClose:f,add:c,holidayData:i})=>{let S=h.getvalue("clientId");const[I,b]=n.useState(!1),t=ce({initialValues:i?{holidayName:i?i.holidayName:"",holidayDate:i?i.holidayDate:"",holidayType:i?i.holidayType.toString():"true",holidayId:i?i.holidayId:"",clientId:i?i.clientId:S}:{holidayName:"",holidayDate:"",holidayType:"false",holidayId:"",clientId:S},validationSchema:me().shape({holidayId:E(),holidayName:E().matches(/^[a-zA-Z0-9-_@() ]+$/,"holidayName can only contain letters, numbers, and spaces").required("Holiday name is required"),clientId:E(),holidayDate:he().required("Holiday Date is required"),holidayType:E().required("Holiday Type is required"),holidayStatus:ye()}),enableReinitialize:!0,onSubmit:()=>{b(!0)}}),v=()=>{if(t.values.holidayName.trim()==="")return l("Please Enter Holiday Name","error"),!1;if(t.values.holidayDate.trim()==="")return l("Please enter Holiday Date","error"),!1;if(t.values.holidayType==="")return l("Please select Holiday Type","error"),!1;b(!0);let o={holidayDate:t.values.holidayDate,holidayName:t.values.holidayName,holidayType:t.values.holidayType.toString()==="true",clientId:h.getvalue("clientId")};t.isValid?g(m.postWithData("admin","saveHolidays",o).then(y=>{y.data.Success?(l("Holiday has been saved successfully.","success"),t.resetForm(),f(!0)):l(y.data.Message?y.data.Message:"An error occured","error")})):t.errors.holidayName||l("Please fill all fields.","error")},D=()=>{if(t.values.holidayName.trim()==="")return l("Please Enter Holiday Name","error"),!1;if(t.values.holidayDate.trim()==="")return l("Please enter Holiday Date","error"),!1;if(t.values.holidayType==="")return l("Please select Holiday Type","error"),!1;b(!0),t.isValid?g(m.postWithData("admin","updateHolidays",{...t.values}).then(o=>{o.data.Success?(l("Holiday has been updated successfully.","success"),t.resetForm(),f(!0)):l(o.data.Message?o.data.Message:"An error occured","error")})):l("Please fill all fields.","error")},p=()=>{f(!1),t.resetForm()},F=o=>{m.saveAuditLog(o)};return e.jsxDEV(Y,{open:A,onClose:f,maxWidth:"sm",fullWidth:!0,children:[e.jsxDEV(Ne,{children:[c?"Add New":"Update "," Holiday"]},void 0,!0,{fileName:"C:/Curately-aws-demo-test/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Settings/Holidays/AddHolidays.tsx",lineNumber:177,columnNumber:13},void 0),e.jsxDEV(M,{"aria-label":"close",onClick:p,sx:{position:"absolute",right:8,top:8,color:o=>o.palette.grey[500]},children:e.jsxDEV(ee,{},void 0,!1,{fileName:"C:/Curately-aws-demo-test/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Settings/Holidays/AddHolidays.tsx",lineNumber:188,columnNumber:17},void 0)},void 0,!1,{fileName:"C:/Curately-aws-demo-test/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Settings/Holidays/AddHolidays.tsx",lineNumber:178,columnNumber:13},void 0),e.jsxDEV(ae,{children:e.jsxDEV("form",{onSubmit:t.handleSubmit,children:e.jsxDEV(x,{spacing:2,children:[e.jsxDEV(x,{children:[e.jsxDEV(ge,{autoFocus:!0,id:"holidayName",label:"Holidays Name",size:"small",type:"text",fullWidth:!0,required:!0,variant:"outlined",value:t.values.holidayName,onChange:o=>{t.setFieldValue("holidayName",o.target.value)},error:t.touched.holidayName&&!!t.errors.holidayName},void 0,!1,{fileName:"C:/Curately-aws-demo-test/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Settings/Holidays/AddHolidays.tsx",lineNumber:194,columnNumber:29},void 0),e.jsxDEV(pe,{formikObj:t,name:"holidayName",isFormSubmitted:I},void 0,!1,{fileName:"C:/Curately-aws-demo-test/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Settings/Holidays/AddHolidays.tsx",lineNumber:209,columnNumber:29},void 0)]},void 0,!0,{fileName:"C:/Curately-aws-demo-test/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Settings/Holidays/AddHolidays.tsx",lineNumber:193,columnNumber:25},void 0),e.jsxDEV(oe,{dateAdapter:fe,children:e.jsxDEV(ie,{label:"Date",value:t.values.holidayDate?$.fromISO(t.values.holidayDate):null,onChange:o=>{t.setFieldValue("holidayDate",o?o.toISODate():"")},slotProps:{textField:{size:"small"}}},void 0,!1,{fileName:"C:/Curately-aws-demo-test/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Settings/Holidays/AddHolidays.tsx",lineNumber:212,columnNumber:29},void 0)},void 0,!1,{fileName:"C:/Curately-aws-demo-test/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Settings/Holidays/AddHolidays.tsx",lineNumber:211,columnNumber:25},void 0),e.jsxDEV(He,{size:"small",className:"mt-5",children:[e.jsxDEV(De,{id:"type-label",children:"Type"},void 0,!1,{fileName:"C:/Curately-aws-demo-test/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Settings/Holidays/AddHolidays.tsx",lineNumber:232,columnNumber:29},void 0),e.jsxDEV(Ce,{labelId:"type-label",id:"holidayType",name:"holidayType",label:"Type",value:t.values.holidayType,onChange:o=>{t.setFieldValue("holidayType",o.target.value)},children:[e.jsxDEV(L,{value:"true",children:"Default"},void 0,!1,{fileName:"C:/Curately-aws-demo-test/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Settings/Holidays/AddHolidays.tsx",lineNumber:243,columnNumber:33},void 0),e.jsxDEV(L,{value:"false",children:"Custom"},void 0,!1,{fileName:"C:/Curately-aws-demo-test/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Settings/Holidays/AddHolidays.tsx",lineNumber:244,columnNumber:33},void 0)]},void 0,!0,{fileName:"C:/Curately-aws-demo-test/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Settings/Holidays/AddHolidays.tsx",lineNumber:233,columnNumber:29},void 0)]},void 0,!0,{fileName:"C:/Curately-aws-demo-test/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Settings/Holidays/AddHolidays.tsx",lineNumber:231,columnNumber:25},void 0)]},void 0,!0,{fileName:"C:/Curately-aws-demo-test/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Settings/Holidays/AddHolidays.tsx",lineNumber:192,columnNumber:21},void 0)},i==null?void 0:i.holidayId,!1,{fileName:"C:/Curately-aws-demo-test/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Settings/Holidays/AddHolidays.tsx",lineNumber:191,columnNumber:17},void 0)},void 0,!1,{fileName:"C:/Curately-aws-demo-test/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Settings/Holidays/AddHolidays.tsx",lineNumber:190,columnNumber:13},void 0),e.jsxDEV(te,{children:[e.jsxDEV(P,{variant:"outlined",type:"button",size:"small",color:"secondary",className:"mr-2",onClick:p,children:"Cancel"},void 0,!1,{fileName:"C:/Curately-aws-demo-test/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Settings/Holidays/AddHolidays.tsx",lineNumber:251,columnNumber:17},void 0),e.jsxDEV(P,{color:"primary",variant:"contained",size:"small",onClick:()=>{(c?v:D)(),F(4242)},children:[c?"Save":"Update"," Holiday"]},void 0,!0,{fileName:"C:/Curately-aws-demo-test/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Settings/Holidays/AddHolidays.tsx",lineNumber:259,columnNumber:17},void 0)]},void 0,!0,{fileName:"C:/Curately-aws-demo-test/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Settings/Holidays/AddHolidays.tsx",lineNumber:250,columnNumber:13},void 0)]},void 0,!0,{fileName:"C:/Curately-aws-demo-test/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Settings/Holidays/AddHolidays.tsx",lineNumber:175,columnNumber:9},void 0)},oa=()=>{const A=h.checkSettings(130008)===5||h.checkSettings(130008)===6,f=h.checkSettings(130008)===6;let c=h.getvalue("clientId");const[i,S]=n.useState([]),[I,b]=n.useState({holidayId:"",holidayName:"",holidayDate:"",holidayType:"false",clientId:""}),[t,v]=n.useState(!1),[D,p]=n.useState(!1),[F,o]=n.useState(0),[y,B]=n.useState(""),[V,O]=n.useState([]),[H,j]=n.useState({pageIndex:0,pageSize:10}),[U,q]=n.useState([{desc:!0,id:"holidayDate"}]);n.useEffect(()=>{const a=i.filter(s=>{var d;const r=y||"";return(d=s.holidayName)==null?void 0:d.toLowerCase().includes(r.toLowerCase())});O(a),j(s=>({...s,pageIndex:0}))},[y,i]);const R=a=>new Promise((s,r)=>{g(m.getCall("admin",`getHolidaysListbyId/${a}/${c}`).then(d=>{if(d.data.list&&d.data.list[0].holidayId){const u=d.data.list[0];b({holidayId:u.holidayId,holidayName:u.holidayName,holidayDate:u.holidayDate,holidayType:u.holidayType,clientId:h.getvalue("clientId")})}else l("Unable to fetch User Data","error");v(!0),s(d)}).catch(d=>{console.error("Error fetching User details:",d),r(d)}))}),W=a=>{R(a).then(()=>{p(!0)}).catch(s=>{l("Unable to fetch User Data",s)})},G=()=>{b({holidayId:"",holidayName:"",holidayDate:"",holidayType:"false",clientId:""}),p(!0),v(!1),N(4241)},K=a=>{p(!1),a&&w()},w=n.useCallback(be.debounce(()=>{g(m.getCall("admin",`getHolidaysList/${c}`).then(a=>{let s=Array.isArray(a.data.list)?a.data.list:[];s=s.filter(r=>r.holidayType||r.isActive),S(s),o(s.length)}))},400),[c]);n.useEffect(()=>{!D&&w()},[]);const Z=(a,s)=>{le(`Are you sure you want to delete ${s} ?`,()=>{_(a),N(4244)})},_=a=>{g(m.deleteById("admin",`deleteHolidays/${a}`,c).then(s=>{s.data.Success?(l("Holiday has been deleted successfully.","success"),w()):l(s.data.Message?s.data.Message:"An error occured while deleting","error")}).catch(s=>{var r,d,u,C;l((d=(r=s.response)==null?void 0:r.data)!=null&&d.Message?(C=(u=s.response)==null?void 0:u.data)==null?void 0:C.Message:"An error occured while deleting","error")}))},J=(a,s)=>{g(m.postWithData("admin","enableDisableHolidays",{clientId:c,isActive:s,holidayId:a}).then(r=>{r.data.Success?(l(`Holiday has been ${s?"Enabled":"Disabled"} successfully.`,"success"),w()):l(r.data.Message?r.data.Message:"An error occured while updating status","error")}).catch(r=>{var d,u,C,k;l((u=(d=r.response)==null?void 0:d.data)!=null&&u.Message?(k=(C=r.response)==null?void 0:C.data)==null?void 0:k.Message:"An error occured while updating status","error")}))},Q=n.useMemo(()=>[{accessorKey:"holidayName",header:"Holidays",size:250},{accessorKey:"holidayDate",header:"Date",Cell:({row:a})=>e.jsxDEV("span",{children:a.original.holidayDate?$.fromFormat(a.original.holidayDate.substring(0,19),"yyyy-MM-dd").toFormat("MM/dd/yyyy"):""},void 0,!1,{fileName:"C:/Curately-aws-demo-test/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Settings/Holidays/Holidays.tsx",lineNumber:239,columnNumber:9},void 0),size:250,sortType:"datetime"},{accessorKey:"holidayType",header:"Type",size:200,accessorFn:a=>`${a.holidayType}`,Cell:({row:a})=>e.jsxDEV("div",{children:e.jsxDEV("span",{children:a.original.holidayType===!0?"Default":"Custom"},void 0,!1,{fileName:"C:/Curately-aws-demo-test/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Settings/Holidays/Holidays.tsx",lineNumber:253,columnNumber:11},void 0)},void 0,!1,{fileName:"C:/Curately-aws-demo-test/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Settings/Holidays/Holidays.tsx",lineNumber:252,columnNumber:9},void 0)},{accessorKey:"Actions",header:"Enabled",enableSorting:!1,Cell:({row:a})=>e.jsxDEV(x,{children:a.original.holidayType===!0?e.jsxDEV(Se,{checked:!!a.original.isActive,onChange:s=>{J(a.original.holidayId,s.target.checked)},inputProps:{"aria-label":"controlled"}},void 0,!1,{fileName:"C:/Curately-aws-demo-test/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Settings/Holidays/Holidays.tsx",lineNumber:282,columnNumber:15},void 0):e.jsxDEV(x,{direction:"row",children:[A?e.jsxDEV(z,{title:"Edit",placement:"top",color:"primary",children:e.jsxDEV(M,{onClick:()=>{W(a.original.holidayId),N(4243)},children:e.jsxDEV(re,{},void 0,!1,{fileName:"C:/Curately-aws-demo-test/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Settings/Holidays/Holidays.tsx",lineNumber:295,columnNumber:25},void 0)},void 0,!1,{fileName:"C:/Curately-aws-demo-test/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Settings/Holidays/Holidays.tsx",lineNumber:294,columnNumber:23},void 0)},void 0,!1,{fileName:"C:/Curately-aws-demo-test/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Settings/Holidays/Holidays.tsx",lineNumber:293,columnNumber:21},void 0):null,f?e.jsxDEV(z,{title:"Delete",placement:"top",color:"primary",children:e.jsxDEV(M,{onClick:()=>{Z(a.original.holidayId,a.original.holidayName)},children:e.jsxDEV(de,{},void 0,!1,{fileName:"C:/Curately-aws-demo-test/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Settings/Holidays/Holidays.tsx",lineNumber:305,columnNumber:25},void 0)},void 0,!1,{fileName:"C:/Curately-aws-demo-test/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Settings/Holidays/Holidays.tsx",lineNumber:304,columnNumber:23},void 0)},void 0,!1,{fileName:"C:/Curately-aws-demo-test/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Settings/Holidays/Holidays.tsx",lineNumber:303,columnNumber:21},void 0):null]},void 0,!0,{fileName:"C:/Curately-aws-demo-test/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Settings/Holidays/Holidays.tsx",lineNumber:290,columnNumber:15},void 0)},a.original.holidayId,!1,{fileName:"C:/Curately-aws-demo-test/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Settings/Holidays/Holidays.tsx",lineNumber:279,columnNumber:9},void 0),size:200}],[]),N=a=>{m.saveAuditLog(a)};n.useEffect(()=>{N(4240)},[]);const X=a=>{a>H.pageIndex?N(4245):a<H.pageIndex&&N(4246)};return e.jsxDEV("div",{className:"holidays pt-3 px-5",children:[e.jsxDEV(T,{container:!0,direction:"row",className:"customCard px-4 py-2",justifyContent:"space-between",alignItems:"center",display:"flex",sx:{minHeight:"auto !important"},children:[e.jsxDEV(se,{variant:"h6",className:"headerName",children:"Holidays"},void 0,!1,{fileName:"C:/Curately-aws-demo-test/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Settings/Holidays/Holidays.tsx",lineNumber:349,columnNumber:7},void 0),e.jsxDEV(x,{direction:"row",className:"btn-container",children:e.jsxDEV(P,{variant:"contained",color:"primary",size:"small",onClick:G,children:"New Holidays"},void 0,!1,{fileName:"C:/Curately-aws-demo-test/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Settings/Holidays/Holidays.tsx",lineNumber:353,columnNumber:9},void 0)},void 0,!1,{fileName:"C:/Curately-aws-demo-test/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Settings/Holidays/Holidays.tsx",lineNumber:352,columnNumber:7},void 0)]},void 0,!0,{fileName:"C:/Curately-aws-demo-test/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Settings/Holidays/Holidays.tsx",lineNumber:340,columnNumber:5},void 0),e.jsxDEV(T,{container:!0,className:"customCard p-0",children:[e.jsxDEV(T,{sx:{width:"calc(100%)"},children:e.jsxDEV("div",{className:"MRTableCustom  pl-0 ",children:e.jsxDEV(ue,{columns:Q,data:V,state:{sorting:U,pagination:H,globalFilter:y},enablePinning:!0,enableStickyHeader:!0,initialState:{columnPinning:{left:["mrt-row-select","name"]},density:"compact",showGlobalFilter:!0},onSortingChange:q,enableDensityToggle:!1,enableFullScreenToggle:!0,enableFilters:!1,enableGlobalFilterModes:!0,columnResizeMode:"onChange",onPaginationChange:j,getRowId:a=>a.holidayId,icons:{ArrowDownwardIcon:a=>e.jsxDEV(ne,{...a},void 0,!1,{fileName:"C:/Curately-aws-demo-test/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Settings/Holidays/Holidays.tsx",lineNumber:383,columnNumber:59},void 0)},rowCount:V.length,muiPaginationProps:{rowsPerPageOptions:[10],showFirstButton:!1,showLastButton:!1,SelectProps:{style:{display:"none"}}},enablePagination:!0,renderBottomToolbarCustomActions:()=>e.jsxDEV(xe,{page:H.pageIndex,rowsPerPage:10,rowCount:V.length,onChangePage:a=>{j({...H,pageIndex:a,pageSize:10}),X(a)},showCount:!1},void 0,!1,{fileName:"C:/Curately-aws-demo-test/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Settings/Holidays/Holidays.tsx",lineNumber:396,columnNumber:15},void 0),onGlobalFilterChange:B},void 0,!1,{fileName:"C:/Curately-aws-demo-test/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Settings/Holidays/Holidays.tsx",lineNumber:359,columnNumber:11},void 0)},void 0,!1,{fileName:"C:/Curately-aws-demo-test/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Settings/Holidays/Holidays.tsx",lineNumber:358,columnNumber:9},void 0)},void 0,!1,{fileName:"C:/Curately-aws-demo-test/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Settings/Holidays/Holidays.tsx",lineNumber:357,columnNumber:7},void 0),D?e.jsxDEV(ve,{open:D,handleClose:K,add:!t,holidayData:I},void 0,!1,{fileName:"C:/Curately-aws-demo-test/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Settings/Holidays/Holidays.tsx",lineNumber:414,columnNumber:11},void 0):null]},void 0,!0,{fileName:"C:/Curately-aws-demo-test/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Settings/Holidays/Holidays.tsx",lineNumber:356,columnNumber:5},void 0)]},void 0,!0,{fileName:"C:/Curately-aws-demo-test/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Settings/Holidays/Holidays.tsx",lineNumber:339,columnNumber:3},void 0)};export{oa as default};
