import{r as l,W as I,A as b,L as n,k as a,O as y,C as Z,B as ee,T as te,V as f}from"./Da4I77gy.js";import{E as ae}from"./CTncTM4t.js";import{A as se}from"./CUpMXY8Z.js";import{u as re}from"./DK3Gw6Ji.js";import{V as ne}from"./BRh2WteL.js";import{A as ie}from"./DwQ4byYi.js";import{C as le}from"./DGAwO83Z.js";import{T as w,C as V,F as me}from"./DrwwBJQC.js";import{M as oe}from"./YFmo1cJD.js";import{D as ce}from"./Bt1msObo.js";import{A as ue,a as de,b as ve}from"./Dh0klti0.js";import{F as be}from"./Bfaybex0.js";const Ee=({closeInvitePopup:j})=>{const[v,h]=l.useState([]),[A,L]=l.useState([]),[m,d]=l.useState([]),[g,k]=l.useState("2"),[N,p]=l.useState(""),[R,D]=l.useState(!1),[x,C]=l.useState(""),W=()=>{I(b.postWithData("admin","getRoleList",{recrId:n.getvalue("recrId"),clientId:n.getvalue("clientId")}).then(e=>{const t=e.data;t.Success&&L(t.list)}))};l.useEffect(()=>{W()},[]);const $=e=>/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(e),T=async e=>{try{await re.validate(e),p(""),C(""),P(e)}catch(t){t instanceof ne&&C(t.message||"Invalid email format")}},B=e=>{d(m.filter(t=>t!==e))},F=(e,t)=>{p(t),$(t)?M([t]):M([])},[z,M]=l.useState([]),O=()=>{if(m.length){let e=m.filter((t,s)=>m.indexOf(t)===s);I(b.postWithData("admin","sendInviteEmail",{recrId:n.getvalue("recrId"),clientId:n.getvalue("clientId"),roleId:g,emailIds:e}).then(t=>{console.log(t.data),t.data.Success?(f("Invitation sent successfully.","success"),j(!0)):f(t.data.Message?t.data.Message:"An error occured while inviting.","error")}))}else f("Please enter emails to Invite","error")},P=e=>{D(!0),b.postWithData("admin","inviteRecrAvailability",{recrId:n.getvalue("recrId"),clientId:n.getvalue("clientId"),email:e}).then(t=>{console.log(t.data),t.data.Success?_(e):f(t.data.Message?t.data.Message:"An error occured while validating the email.","error")})},_=async e=>{try{(await se.validateWorkEmail(e)).data.debounce.free_email==="false"?d([...m,e]):f("Please Enter Work Email.","error")}catch(t){return console.error("Error validating email:",t),!1}D(!1)},[G,E]=l.useState(!1),[H,S]=l.useState(""),K=(e,t)=>{const{checked:s,value:c,name:i}=e.target;d(s?[...m,c]:m.filter(o=>o!==c));const r=v.map(o=>o.email===t.email?{...o,selected:s}:o);h(r);const u=r.every(o=>o.selected);E(u)},q=e=>{const{checked:t,value:s,name:c}=e.target;E(t);let i=m;v.forEach(u=>{t?i.includes(u.email)||i.push(u.email):i=i.filter(o=>o!==u.email)}),d([...i]);const r=v.map(u=>({...u,selected:t}));h(r)};l.useEffect(()=>{Q()},[]);const J=e=>{I(b.postWithData("admin","getDomainsRecruiterDetails",{domain:n.getvalue("email").split("@")[1],recrId:n.getvalue("recrId"),clientId:n.getvalue("clientId")}).then(t=>{if(t.data.Success){const s=t.data.domainRecruiterDetails.find(c=>c.domain===n.getvalue("email").split("@")[1]);if(s!=null&&s.domain){let c=[];for(let r=0;r<e.length;r++)c.push({email:e[r].email,id:e[r].recrId,name:e[r].recruiterName,selected:!1});let i=[];for(let r=0;r<s.recruiterDetails.length;r++)s.recruiterDetails[r].recruiterName&&s.recruiterDetails[r].recrId&&!c.some(o=>o.id===s.recruiterDetails[r].recrId)&&!s.recruiterDetails[r].invited&&i.push({name:s.recruiterDetails[r].recruiterName,email:s.recruiterDetails[r].email,id:s.recruiterDetails[r].recrId,selected:!1});h(i),i.length&&(i.length===1?S(`${i[0].name} person from ${n.getvalue("email").split("@")[1]} already using Curately`):S(`${i.length} people from ${n.getvalue("email").split("@")[1]} already using Curately`))}}}))},Q=()=>{I(b.getById("admin",`getCredits/${n.getvalue("clientId")}`,n.getvalue("recrId")).then(e=>{console.log(e.data),e.data.Success&&J(e.data.invitedRecruiterDetails||[])}))},[U,X]=l.useState(!1),Y=e=>(t,s)=>{X(s?e:!1)};return a.jsxDEV("div",{id:"InviteTeamMembers",children:[a.jsxDEV(y,{container:!0,direction:"row",children:[a.jsxDEV(y,{size:7,className:"input-wrapper",children:[a.jsxDEV(ie,{multiple:!0,freeSolo:!0,value:m,onChange:(e,t)=>{if(t.length>m.length){const s=t[t.length-1];T(s)}else d(t)},options:z,inputValue:N,onInputChange:F,renderInput:e=>a.jsxDEV(w,{...e,label:"Add people using their emails",variant:"outlined",error:!!x,helperText:x,onKeyDown:t=>{t.key==="Enter"&&N&&(t.preventDefault(),T(N))}},void 0,!1,{fileName:"C:/Curately-aws-demo-test/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Settings/Invite/InviteTeamMembers/InviteTeamMembers.tsx",lineNumber:365,columnNumber:29},void 0),renderTags:(e,t)=>e.map((s,c)=>a.jsxDEV(le,{variant:"outlined",label:s,...t({index:c}),onDelete:()=>B(s)},void 0,!1,{fileName:"C:/Curately-aws-demo-test/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Settings/Invite/InviteTeamMembers/InviteTeamMembers.tsx",lineNumber:378,columnNumber:29},void 0))},void 0,!1,{fileName:"C:/Curately-aws-demo-test/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Settings/Invite/InviteTeamMembers/InviteTeamMembers.tsx",lineNumber:349,columnNumber:21},void 0),R&&a.jsxDEV(Z,{className:"loaderIcon",size:20},void 0,!1,{fileName:"C:/Curately-aws-demo-test/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Settings/Invite/InviteTeamMembers/InviteTeamMembers.tsx",lineNumber:382,columnNumber:35},void 0)]},void 0,!0,{fileName:"C:/Curately-aws-demo-test/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Settings/Invite/InviteTeamMembers/InviteTeamMembers.tsx",lineNumber:348,columnNumber:17},void 0),a.jsxDEV(y,{size:3,children:a.jsxDEV(w,{fullWidth:!0,className:"mt-1 ml-1",variant:"outlined",type:"text",size:"small",id:"roleId",name:"roleId",defaultValue:2,value:g,onChange:e=>k(e.target.value),select:!0,children:A.map(e=>a.jsxDEV(oe,{value:e.roleId,children:e.roleName},e.roleId,!1,{fileName:"C:/Curately-aws-demo-test/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Settings/Invite/InviteTeamMembers/InviteTeamMembers.tsx",lineNumber:398,columnNumber:40},void 0))},void 0,!1,{fileName:"C:/Curately-aws-demo-test/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Settings/Invite/InviteTeamMembers/InviteTeamMembers.tsx",lineNumber:385,columnNumber:21},void 0)},void 0,!1,{fileName:"C:/Curately-aws-demo-test/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Settings/Invite/InviteTeamMembers/InviteTeamMembers.tsx",lineNumber:384,columnNumber:17},void 0),a.jsxDEV(y,{sx:{width:70},children:a.jsxDEV(ee,{color:"primary",variant:"contained",onClick:O,disabled:!m.length,className:"ml-2 my-3",children:"Invite"},void 0,!1,{fileName:"C:/Curately-aws-demo-test/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Settings/Invite/InviteTeamMembers/InviteTeamMembers.tsx",lineNumber:405,columnNumber:21},void 0)},void 0,!1,{fileName:"C:/Curately-aws-demo-test/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Settings/Invite/InviteTeamMembers/InviteTeamMembers.tsx",lineNumber:404,columnNumber:17},void 0)]},void 0,!0,{fileName:"C:/Curately-aws-demo-test/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Settings/Invite/InviteTeamMembers/InviteTeamMembers.tsx",lineNumber:347,columnNumber:13},void 0),a.jsxDEV(ce,{className:"my-4"},void 0,!1,{fileName:"C:/Curately-aws-demo-test/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Settings/Invite/InviteTeamMembers/InviteTeamMembers.tsx",lineNumber:408,columnNumber:13},void 0),v.length?a.jsxDEV(a.Fragment,{children:[a.jsxDEV("span",{className:"fs-14 fw-6",children:"Recommended people for you"},void 0,!1,{fileName:"C:/Curately-aws-demo-test/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Settings/Invite/InviteTeamMembers/InviteTeamMembers.tsx",lineNumber:412,columnNumber:25},void 0),a.jsxDEV(ue,{expanded:U,onChange:Y(!0),className:"mt-2",children:[a.jsxDEV(de,{expandIcon:a.jsxDEV(ae,{},void 0,!1,{fileName:"C:/Curately-aws-demo-test/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Settings/Invite/InviteTeamMembers/InviteTeamMembers.tsx",lineNumber:415,columnNumber:45},void 0),"aria-controls":"teamListAccordion-content",id:"teamListAccordion-header",children:[a.jsxDEV(V,{checked:G,onChange:q,className:"pt-0",color:"secondary"},void 0,!1,{fileName:"C:/Curately-aws-demo-test/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Settings/Invite/InviteTeamMembers/InviteTeamMembers.tsx",lineNumber:419,columnNumber:33},void 0),a.jsxDEV(te,{children:[" ",H]},void 0,!0,{fileName:"C:/Curately-aws-demo-test/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Settings/Invite/InviteTeamMembers/InviteTeamMembers.tsx",lineNumber:420,columnNumber:33},void 0)]},void 0,!0,{fileName:"C:/Curately-aws-demo-test/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Settings/Invite/InviteTeamMembers/InviteTeamMembers.tsx",lineNumber:414,columnNumber:29},void 0),a.jsxDEV(ve,{sx:{overflow:"auto",maxHeight:200},className:"pt-0",children:a.jsxDEV(be,{className:"pl-3",children:v.map(e=>a.jsxDEV(me,{control:a.jsxDEV(V,{checked:e.selected,value:e.email,onChange:t=>K(t,e)},void 0,!1,{fileName:"C:/Curately-aws-demo-test/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Settings/Invite/InviteTeamMembers/InviteTeamMembers.tsx",lineNumber:428,columnNumber:87},void 0),label:a.jsxDEV(a.Fragment,{children:[a.jsxDEV("span",{className:"fs-14 fw-6 pr-2",children:e.name},void 0,!1,{fileName:"C:/Curately-aws-demo-test/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Settings/Invite/InviteTeamMembers/InviteTeamMembers.tsx",lineNumber:428,columnNumber:212},void 0),a.jsxDEV("span",{className:"fs-13",children:e.email},void 0,!1,{fileName:"C:/Curately-aws-demo-test/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Settings/Invite/InviteTeamMembers/InviteTeamMembers.tsx",lineNumber:428,columnNumber:268},void 0)]},void 0,!0,{fileName:"C:/Curately-aws-demo-test/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Settings/Invite/InviteTeamMembers/InviteTeamMembers.tsx",lineNumber:428,columnNumber:210},void 0)},e.id,!1,{fileName:"C:/Curately-aws-demo-test/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Settings/Invite/InviteTeamMembers/InviteTeamMembers.tsx",lineNumber:428,columnNumber:42},void 0))},void 0,!1,{fileName:"C:/Curately-aws-demo-test/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Settings/Invite/InviteTeamMembers/InviteTeamMembers.tsx",lineNumber:423,columnNumber:33},void 0)},void 0,!1,{fileName:"C:/Curately-aws-demo-test/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Settings/Invite/InviteTeamMembers/InviteTeamMembers.tsx",lineNumber:422,columnNumber:29},void 0)]},void 0,!0,{fileName:"C:/Curately-aws-demo-test/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Settings/Invite/InviteTeamMembers/InviteTeamMembers.tsx",lineNumber:413,columnNumber:25},void 0)]},void 0,!0,{fileName:"C:/Curately-aws-demo-test/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Settings/Invite/InviteTeamMembers/InviteTeamMembers.tsx",lineNumber:411,columnNumber:21},void 0):null]},void 0,!0,{fileName:"C:/Curately-aws-demo-test/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Settings/Invite/InviteTeamMembers/InviteTeamMembers.tsx",lineNumber:346,columnNumber:10},void 0)};export{Ee as I};
