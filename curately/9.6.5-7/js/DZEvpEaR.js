import{r as a,cl as ee,k as s,O as b,l as h,T as re,B as k,V as u,A as oe}from"./Da4I77gy.js";import{u as te,F as se,H as le,w as ae,I as ne}from"./CGB7yjkC.js";import{D as ie,H as ue}from"./DyfpXvbV.js";import"./BjCz2ClD.js";import{T as de}from"./DrwwBJQC.js";import{v as c}from"./D9g3XlR8.js";const ce=ae("div"),Ne=({formIdPassed:g,formNamePassed:E,callParentSave:C,cancelClicked:B,isFormBuilder:N,showSave:L,showCancel:j,canDelete:A,generateDataKey:V=!1,customFields:I,isCustomFieldDeleteSettingEnabled:W=!0})=>{const[t,d]=a.useContext(ee),[y,M]=a.useState(0),[O,P]=a.useState(!1),p=a.useRef(0),[T,S]=a.useState(!1),[m,$]=a.useState(E),[x,z]=a.useState(!1),R=a.useRef(null),[F,i]=a.useState(null),H=r=>{P(r)},q=a.useCallback((r,o)=>{d(e=>te(e,{$splice:[[r,1],[o,0,e[r]]]}))},[t]),w=(r,o,e)=>(console.log(o,"heree"),[...r.slice(0,o),e,...r.slice(o)]),v=r=>{t.forEach(l=>{l.isActive=!1});let o;const e={...r};e.id=c(),e.isActive=!0,e.labelName="",e.description="",e.value="",console.log("addingPosition : "+y),console.log("addingPositionTemp : "+p.current),e.hasOwnProperty("labelValue")&&(e.labelValue=""),e.fieldType==="checkbox"&&(e.id=c(),e.labelName="New Checkbox Label",e.checked=!1,e.isTouched=!1),e.fieldType==="multiplechoice"&&(e.choices=[{id:1+e.id,character:"A",value:"Choice 1"}]),o=w(t,T?0:p.current+1,e),o.forEach(l=>{l.id||(l.id=c()),l.value=""}),d([...o]),S(!1),i(e.id)},G=r=>{console.log(r,"tttee");const o=t.filter(e=>e.id!==r);d([...o])},Q=(r,o)=>{const e={...r};e.id=c(),e.labelName=r.labelName?"Copy Of "+r.labelName:"",e.description=r.description?r.description:"",e.datakey="",e.value="";let l=[];if(e.fieldType==="weightedmultiplechoice"||e.fieldType==="multiplechoice"){let n=1;e.choices.forEach(Y=>{const D={...Y},_=n+e.id;D.id=_,l.push(D),n++})}e.choices=[...l];const f=w(t,o,e);f.forEach(n=>{n.id||(n.id=c()),n.value=""}),console.log(f);let X=f.map(n=>(n.id===f[o].id?n.isActive=!0:n.isActive=!1,n));d([...X]),i(e.id)},U=r=>{console.log(r,"getAdingPosition"),p.current=r,M(r)},Z=a.useCallback((r,o)=>s.jsxDEV(se,{index:o,id:r.id,moveCard:q,addFormElement:v,deleteFormElement:G,copyFormElement:Q,formItem:r,getAdingPosition:U,addingPosition:y,focusId:F,canDelete:A,generateDataKey:V,setFocusId:i,isCustomFieldDeleteSettingEnabled:W},r.id,!1,{fileName:"C:/Curately-aws-demo-test/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Letters/Workflow/FormBuilder/forms/FormContainer.tsx",lineNumber:288,columnNumber:17},void 0),[t,F]);a.useEffect(()=>{N&&d([...t])},[]);const J=r=>{oe.saveAuditLog(r)},K=async()=>{if(!m){u("Please enter Form Name.","error");return}let r=!1;for(let o=0;o<t.length;o++)if(!["conditionallogic","label","divider","displaytext","pagebreak"].includes(t[o].fieldType))if(t[o].inputType==="checkbox")if(t[o].checkboxOption.value){if(!/^(?=.*[a-zA-Z0-9]).{1,}$/.test(t[o].checkboxOption.value)){r=!0,i(t[o].id),u("Please Enter valid Checkbox Option","error");break}}else{r=!0,i(t[o].id),u("Please Enter Checkbox Option","error");break}else if(t[o].labelName){if(!/^(?=.*[a-zA-Z0-9]).{1,}$/.test(t[o].labelName)){r=!0,i(t[o].id),u("Please Enter valid Question","error");break}}else{r=!0,i(t[o].id),u("Please Enter Question","error");break}if(!r){const o=t.filter(e=>e.fieldType==="weightedmultiplechoice");if(o.length>0)for(let e=0;e<o.length;e++){const l=o[e];if(!("weightedPoints"in l)||l.weightedPoints===""){i(l.id),u(`Please enter points for ${l.labelName}`,"error");break}else if(!("weightedCorrectAnswer"in l)||l.weightedCorrectAnswer===""){i(l.id),u(`Please enter Correct Answer for ${l.labelName}`,"error");break}else o.length-1===e&&C(t,m)}else C(t,m)}};return s.jsxDEV(b,{sx:{display:"flex"},className:"formBuilder",children:s.jsxDEV(b,{sx:{flexGrow:1},children:[s.jsxDEV(b,{children:s.jsxDEV(b,{container:!0,direction:"row",justifyContent:"space-evenly",alignItems:"center",className:"topBar px-4",children:[s.jsxDEV(h,{children:[s.jsxDEV(de,{type:"text",variant:"standard",required:!0,error:x,label:"Enter Form Name",className:`form-name-text ${N?"":"d-none"}`,sx:{background:"#fff",borderRadius:"4px","& .MuiOutlinedInput-root .MuiOutlinedInput-notchedOutline":{borderColor:"rgb(187, 186, 184)"},"& .MuiInputBase-input.MuiOutlinedInput-input":{color:"#1A1A1A",fontSize:"13px",fontWeight:600,fontFamily:"Segoe UI"},"& .MuiOutlinedInput-root:hover .MuiOutlinedInput-notchedOutline":{borderColor:"var(--c-primary-color)"},"& .MuiOutlinedInput-root.Mui-focused .MuiOutlinedInput-notchedOutline":{borderColor:"var(--c-primary-color)",borderWidth:"2px"},mb:1,mr:2},placeholder:"",value:m,onChange:r=>{$(r.target.value),z(!1)}},void 0,!1,{fileName:"C:/Curately-aws-demo-test/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Letters/Workflow/FormBuilder/forms/FormContainer.tsx",lineNumber:419,columnNumber:29},void 0),x&&s.jsxDEV(re,{className:"form-name-error-text",sx:{pb:1},children:" Form name is required."},void 0,!1,{fileName:"C:/Curately-aws-demo-test/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Letters/Workflow/FormBuilder/forms/FormContainer.tsx",lineNumber:452,columnNumber:47},void 0)]},void 0,!0,{fileName:"C:/Curately-aws-demo-test/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Letters/Workflow/FormBuilder/forms/FormContainer.tsx",lineNumber:418,columnNumber:25},void 0),s.jsxDEV(h,{children:s.jsxDEV(le,{setFocusId:r=>i(r),customFields:I},void 0,!1,{fileName:"C:/Curately-aws-demo-test/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Letters/Workflow/FormBuilder/forms/FormContainer.tsx",lineNumber:456,columnNumber:29},void 0)},void 0,!1,{fileName:"C:/Curately-aws-demo-test/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Letters/Workflow/FormBuilder/forms/FormContainer.tsx",lineNumber:455,columnNumber:25},void 0),s.jsxDEV(h,{className:"d-flex",children:[L?s.jsxDEV(k,{size:"small",variant:"contained",color:"primary",className:"form-action-btn",sx:{mr:1},onClick:()=>{K(),J(4279)},disabled:t.length===0,children:g?"Update":"Save"},void 0,!1,{fileName:"C:/Curately-aws-demo-test/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Letters/Workflow/FormBuilder/forms/FormContainer.tsx",lineNumber:461,columnNumber:37},void 0):null,j?s.jsxDEV(k,{size:"small",variant:"outlined",color:"secondary",className:"form-action-btn",onClick:B,children:"Cancel"},void 0,!1,{fileName:"C:/Curately-aws-demo-test/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Letters/Workflow/FormBuilder/forms/FormContainer.tsx",lineNumber:467,columnNumber:37},void 0):null]},void 0,!0,{fileName:"C:/Curately-aws-demo-test/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Letters/Workflow/FormBuilder/forms/FormContainer.tsx",lineNumber:458,columnNumber:25},void 0)]},void 0,!0,{fileName:"C:/Curately-aws-demo-test/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Letters/Workflow/FormBuilder/forms/FormContainer.tsx",lineNumber:410,columnNumber:21},void 0)},void 0,!1,{fileName:"C:/Curately-aws-demo-test/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Letters/Workflow/FormBuilder/forms/FormContainer.tsx",lineNumber:409,columnNumber:17},void 0),s.jsxDEV("div",{className:"mainForm",ref:R,children:[s.jsxDEV(ie,{backend:ue,children:s.jsxDEV(ce,{children:t&&(t==null?void 0:t.map((r,o)=>Z(r,o)))},void 0,!1,{fileName:"C:/Curately-aws-demo-test/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Letters/Workflow/FormBuilder/forms/FormContainer.tsx",lineNumber:478,columnNumber:25},void 0)},void 0,!1,{fileName:"C:/Curately-aws-demo-test/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Letters/Workflow/FormBuilder/forms/FormContainer.tsx",lineNumber:477,columnNumber:21},void 0),s.jsxDEV(ne,{openInsertModal:O,closeInsertModal:H,createdFields:t,addElement:v},void 0,!1,{fileName:"C:/Curately-aws-demo-test/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Letters/Workflow/FormBuilder/forms/FormContainer.tsx",lineNumber:486,columnNumber:21},void 0),s.jsxDEV("br",{},void 0,!1,{fileName:"C:/Curately-aws-demo-test/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Letters/Workflow/FormBuilder/forms/FormContainer.tsx",lineNumber:501,columnNumber:21},void 0)]},void 0,!0,{fileName:"C:/Curately-aws-demo-test/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Letters/Workflow/FormBuilder/forms/FormContainer.tsx",lineNumber:475,columnNumber:17},void 0)]},void 0,!0,{fileName:"C:/Curately-aws-demo-test/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Letters/Workflow/FormBuilder/forms/FormContainer.tsx",lineNumber:408,columnNumber:13},void 0)},void 0,!1,{fileName:"C:/Curately-aws-demo-test/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Letters/Workflow/FormBuilder/forms/FormContainer.tsx",lineNumber:404,columnNumber:10},void 0)};export{Ne as F};
