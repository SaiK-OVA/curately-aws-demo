import{r as i,k as s,O as M,T as P,B as R,S as x,L as d,W as m,A as f,V as S}from"./Da4I77gy.js";import{M as A}from"./DCKGuMgj.js";import{S as k}from"./BcvtPrAc.js";import{T as I}from"./DrwwBJQC.js";import{M as N}from"./YFmo1cJD.js";import{I as z}from"./BAhGwoeq.js";import{C as $}from"./xlFz-ogz.js";import{S as O}from"./BV6i5w7m.js";import"./DKbR-AmK.js";import"./DRaa5a1K.js";import"./CNGds3kx.js";import"./D4E8Ilzm.js";import"./DR5LSZrV.js";import"./DGAwO83Z.js";import"./CTncTM4t.js";import"./Dw4YnGpZ.js";import"./DtpZK6Fd.js";import"./Cb9wbhoa.js";import"./D8Uve2Qz.js";import"./BSRMXGwI.js";import"./M012vGJb.js";import"./Ca_RVXIc.js";import"./DGhwAF8n.js";import"./BtfZ3YdN.js";import"./Bt1msObo.js";import"./DVcNEn01.js";import"./DwQ4byYi.js";import"./Bob0wRh9.js";const Ne=({})=>{const[n,u]=i.useState([]),[W,D]=i.useState([]),[g,h]=i.useState([]),[c,b]=i.useState(""),[v,y]=i.useState({}),[G,H]=i.useState({pageIndex:0,pageSize:50}),[w,K]=i.useState(""),p=i.useMemo(()=>c?n.filter(e=>e.metric.toLowerCase().includes(c.toLowerCase())):n,[n,c]);i.useMemo(()=>p.length,[p]);const E=()=>{let t=d.getvalue("clientId");m(f.getCall("admin",`getshortListBarStages/${t}`).then(e=>{var a,l;console.log((a=e==null?void 0:e.data)==null?void 0:a.shortlistBarStages),(l=e==null?void 0:e.data)!=null&&l.shortlistBarStages?h(e.data.shortlistBarStages):h([])}).catch(e=>{console.error("Error fetching metric list",e),h([])}))},j=()=>{m(f.getCall("admin","getGoalMetrics/1").then(t=>{var e,a;if((e=t==null?void 0:t.data)!=null&&e.Success){let l=((a=t==null?void 0:t.data)==null?void 0:a.goalMetrics)||[];u([...l]),C(l)}}).catch(t=>{console.error("Error fetching candidate status list",t)}))},C=t=>{m(f.postWithData("admin","getGoalMetricStatusMapping",{clientId:d.getvalue("clientId")}).then(e=>{var a,l,r,o;(a=e==null?void 0:e.data)!=null&&a.Success&&(D(((l=e==null?void 0:e.data)==null?void 0:l.goalMetricStatusMappings)||[]),V(t,((r=e==null?void 0:e.data)==null?void 0:r.goalMetricStatusMappings)||[]),console.log((o=e==null?void 0:e.data)==null?void 0:o.goalMetricStatusMappings))}).catch(e=>{console.log("Error fetching metric status mapping list",e)}))},V=(t,e)=>{if(e.length>0){let a=t||[];a=a.map(r=>{var o;return{...r,statusId:e!=null&&e.length&&((o=e.find(F=>F.metricId===r.metricId))==null?void 0:o.statusId)||""}});let l=a.reduce((r,o)=>(o!=null&&o.statusId&&(r[o.metricId]=!0),r),{});y({...l}),u([...a])}else u(a=>a.map(l=>({...l,statusId:0})))};i.useEffect(()=>{E(),j()},[]);const L=(t,e)=>{const a=t.target.value;let l=n||[];l=l.map(r=>r.metricId===e?{...r,statusId:a}:r),u([...l])},T=async()=>{Object.entries(v).filter(([a,l])=>l).map(([a])=>parseInt(a));const t=n.map(a=>({metricId:a.metricId,statusId:a!=null&&a.statusId?a.statusId:null})),e={clientId:d.getvalue("clientId"),recrId:d.getvalue("recrId"),goalMetricStatusMappings:t};try{m(f.postWithData("admin","saveGoalMetricStatusMapping",e).then(a=>{a.data.Success?(S("Goal metric status mapping saved successfully","success"),y({}),b(""),C(n)):S(a.data.Message||"Failed to update Goal metric status mapping","error")}))}catch(a){console.error("Error updating recruiter credits:",a),S("Something went wrong. Please try again.","error")}},B=i.useMemo(()=>[{accessorKey:"metric",header:"Metric Name",Cell:({row:t})=>s.jsxDEV("span",{children:t.original.metric},void 0,!1,{fileName:"C:/Curately-aws-demo-test/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Settings/Goals/Metric.tsx",lineNumber:198,columnNumber:17},void 0)},{accessorKey:"statusId",header:"Metric Status",Cell:({row:t})=>(t.getIsSelected(),s.jsxDEV(I,{sx:{width:"220px"},fullWidth:!0,className:"selHeight",name:`metric-${t.original.metricId}`,id:`metric-${t.original.metricId}`,size:"small",select:!0,defaultValue:t.original.statusId?t.original.statusId:"0",value:t.original.statusId?t.original.statusId:"0",placeholder:"Goal Status List",onChange:e=>L(e,t.original.metricId),children:[s.jsxDEV(N,{value:"0",children:"None "},void 0,!1,{fileName:"C:/Curately-aws-demo-test/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Settings/Goals/Metric.tsx",lineNumber:224,columnNumber:21},void 0),g.length>0?g.map((e,a)=>s.jsxDEV(N,{value:e.statusId,children:e.label},`${e.statusId}-${a}-${t.original.metricId}`,!1,{fileName:"C:/Curately-aws-demo-test/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Settings/Goals/Metric.tsx",lineNumber:227,columnNumber:29},void 0)):s.jsxDEV(N,{disabled:!0,children:"No Options Available"},void 0,!1,{fileName:"C:/Curately-aws-demo-test/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Settings/Goals/Metric.tsx",lineNumber:232,columnNumber:25},void 0)]},void 0,!0,{fileName:"C:/Curately-aws-demo-test/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Settings/Goals/Metric.tsx",lineNumber:208,columnNumber:24},void 0))}],[n,g]);return s.jsxDEV("div",{id:"MetricList",className:"pt-2 px-1 ",children:[s.jsxDEV(M,{container:!0,direction:"row",className:"customCard  px-2 py-1",justifyContent:"space-between",alignItems:"center",display:"flex",sx:{minHeight:"auto !important"},children:[s.jsxDEV(P,{variant:"h6",className:"headerFormContainer",children:"Metrics Mapping"},void 0,!1,{fileName:"C:/Curately-aws-demo-test/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Settings/Goals/Metric.tsx",lineNumber:253,columnNumber:17},void 0),s.jsxDEV("div",{children:s.jsxDEV(M,{container:!0,direction:"row",justifyContent:"end",alignItems:"center",children:s.jsxDEV(R,{variant:"contained",type:"button",color:"primary",onClick:()=>T(),children:"save"},void 0,!1,{fileName:"C:/Curately-aws-demo-test/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Settings/Goals/Metric.tsx",lineNumber:270,columnNumber:25},void 0)},void 0,!1,{fileName:"C:/Curately-aws-demo-test/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Settings/Goals/Metric.tsx",lineNumber:257,columnNumber:21},void 0)},void 0,!1,{fileName:"C:/Curately-aws-demo-test/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Settings/Goals/Metric.tsx",lineNumber:256,columnNumber:17},void 0)]},void 0,!0,{fileName:"C:/Curately-aws-demo-test/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Settings/Goals/Metric.tsx",lineNumber:244,columnNumber:13},void 0),s.jsxDEV("div",{className:"MRTableCustom pl-0 mt-0",children:[s.jsxDEV(x,{direction:"row",alignItems:"center",justifyContent:"space-between",spacing:2,className:"headerFormContainer",children:s.jsxDEV(x,{direction:"row",alignItems:"center",spacing:1,justifyContent:"flex-end",children:s.jsxDEV(I,{placeholder:"Search by metric name",size:"small",id:"Search",name:"Search",className:"matricSearchName",value:c,onChange:t=>{b(t.target.value)},slotProps:{input:{startAdornment:s.jsxDEV(O,{fontSize:"small",htmlColor:"#757575"},void 0,!1,{fileName:"C:/Curately-aws-demo-test/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Settings/Goals/Metric.tsx",lineNumber:296,columnNumber:53},void 0),endAdornment:s.jsxDEV(z,{position:"end",disablePointerEvents:!c,children:s.jsxDEV($,{fontSize:"small",htmlColor:c?"#757575":"#ebebeb",sx:{cursor:"pointer"},onClick:()=>b("")},void 0,!1,{fileName:"C:/Curately-aws-demo-test/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Settings/Goals/Metric.tsx",lineNumber:298,columnNumber:41},void 0)},void 0,!1,{fileName:"C:/Curately-aws-demo-test/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Settings/Goals/Metric.tsx",lineNumber:297,columnNumber:51},void 0)}}},void 0,!1,{fileName:"C:/Curately-aws-demo-test/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Settings/Goals/Metric.tsx",lineNumber:286,columnNumber:25},void 0)},void 0,!1,{fileName:"C:/Curately-aws-demo-test/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Settings/Goals/Metric.tsx",lineNumber:285,columnNumber:21},void 0)},void 0,!1,{fileName:"C:/Curately-aws-demo-test/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Settings/Goals/Metric.tsx",lineNumber:284,columnNumber:17},void 0),s.jsxDEV(A,{columns:B,data:p,enableTopToolbar:!1,enableBottomToolbar:!1,enableStickyHeader:!0,enableRowSelection:!1,initialState:{columnPinning:{left:["metric"]},density:"compact",showGlobalFilter:!0},enableDensityToggle:!1,enableFullScreenToggle:!1,enableGlobalFilterModes:!0,columnResizeMode:"onChange",enablePagination:!0,state:{pagination:G,globalFilter:w},muiPaginationProps:{showFirstButton:!1,showLastButton:!1,SelectProps:{style:{display:"none"}}},icons:{ArrowDownwardIcon:t=>s.jsxDEV(k,{...t},void 0,!1,{fileName:"C:/Curately-aws-demo-test/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Settings/Goals/Metric.tsx",lineNumber:334,columnNumber:60},void 0)},enableSelectAll:!0,getRowId:t=>t.metricId,onRowSelectionChange:y},void 0,!1,{fileName:"C:/Curately-aws-demo-test/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Settings/Goals/Metric.tsx",lineNumber:305,columnNumber:17},void 0)]},void 0,!0,{fileName:"C:/Curately-aws-demo-test/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Settings/Goals/Metric.tsx",lineNumber:283,columnNumber:13},void 0)]},void 0,!0,{fileName:"C:/Curately-aws-demo-test/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Settings/Goals/Metric.tsx",lineNumber:240,columnNumber:9},void 0)};export{Ne as default};
