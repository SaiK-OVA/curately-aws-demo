import{L as o,r as a,W as w,A,V as r,k as e,D as se,I as F,n as ie,o as oe,S as D,B as I,U as le,O as G,T as re,b1 as ne}from"./Da4I77gy.js";import{D as ce}from"./BM75X-kx.js";import{V as ue}from"./Bj2t7Uq6.js";import{S as me}from"./BcvtPrAc.js";import{M as fe}from"./DCKGuMgj.js";import{L as be}from"./xO5jApXz.js";import{C as ge}from"./CYG5EPlH.js";import{l as K}from"./Bu7qOu7j.js";import{u as Ve}from"./D7ld7k1a.js";import"./BRh2WteL.js";import{D as ye}from"./BtfZ3YdN.js";import{T as pe}from"./DrwwBJQC.js";import{V as he}from"./BpLfIXrP.js";import{T as _}from"./D8Uve2Qz.js";import{b as Ne,c as H}from"./D4E8Ilzm.js";import"./DKbR-AmK.js";import"./DRaa5a1K.js";import"./CNGds3kx.js";import"./CTncTM4t.js";import"./Dw4YnGpZ.js";import"./DtpZK6Fd.js";import"./Cb9wbhoa.js";import"./BAhGwoeq.js";import"./DR5LSZrV.js";import"./BSRMXGwI.js";import"./DGAwO83Z.js";import"./M012vGJb.js";import"./YFmo1cJD.js";import"./Ca_RVXIc.js";import"./DGhwAF8n.js";import"./Bt1msObo.js";import"./DVcNEn01.js";import"./DwQ4byYi.js";import"./Bob0wRh9.js";import"./Bfaybex0.js";const Ce=({open:E,handleClose:y,add:h,videoData:i,onVideoSaveSuccess:j})=>{const T=i?{Cameratagid:i?i.Cameratagid:"",autoId:i?i.autoId:"",clientId:o.getvalue("clientId"),createdDate:i?i.createdDate:"",label:i?i.label:"",recrId:i?i.recrId:"",recrName:i?i.recrName:""}:{Cameratagid:"",autoId:"",createdDate:"",label:"",recrId:"",recrName:"",clientId:o.getvalue("clientId")},c=Ve({initialValues:T,onSubmit:()=>{},validateOnMount:!0}),x=()=>{y(!1),c.resetForm()},[L,p]=a.useState(""),[b,v]=a.useState({cameratagId:"",label:""}),[g,N]=a.useState(!1);a.useLayoutEffect(()=>(p(`${window.location.protocol==="https:"?"https://app.curately.ai":"http://52.41.18.83:41088"}/Accuick_API/CameraTagAccountManager.html?recrId=${o.getvalue("recrId")}`),window.addEventListener("message",u),()=>window.removeEventListener("message",u)),[]);const V=a.useRef(null);a.useEffect(()=>{const d=V.current,n=()=>{};return d&&d.addEventListener("load",n),()=>{d&&d.removeEventListener("load",n)}},[L,V]);const u=d=>{if(d.data.addCameraTagVideo){let n={cameratagId:d.data.videoUrl,label:d.data.title,createdBy:o.getvalue("recrId"),clientId:o.getvalue("clientId")};v({cameratagId:d.data.videoUrl,label:d.data.title}),p(""),w(A.postWithData("admin","savevideo",n).then(S=>{console.log(S.data),S.data.Success?(N(!1),y(!1),j(),r("Video added successfully.","success"),p(`${window.location.protocol==="https:"?"https://app.curately.ai":"http://52.41.18.83:41088"}/Accuick_API/CameraTagAccountManager.html?recrId=${o.getvalue("recrId")}`),v({cameratagId:"",label:""})):(N(!0),r(S.data.Message,"error"))}))}},M=()=>{[null,void 0,"",0].includes(b.label)||u({data:{addCameraTagVideo:!0,title:b.label,videoUrl:b.cameratagId,action:""}})},P=()=>{if(c.values.label.trim()==="")return r("Please Enter label name","error"),!1;if(c.values.autoId==="")return r("Please select 'title Type","error"),!1;c.isValid?w(A.postWithData("admin","updateVideo",{...c.values}).then(d=>{var n;(n=d==null?void 0:d.data)!=null&&n.Success?(r("Video has been updated successfully.","success"),c.resetForm(),y(!0)):r(d.data.Message?d.data.Message:"An error occured","error")})):r("Please fill all fields.","error")};return e.jsxDEV(se,{open:E,onClose:y,maxWidth:g?"xs":"md",fullWidth:!0,children:[e.jsxDEV(ye,{children:[g?"Update Title":h?"Add":"Update"," Video"]},void 0,!0,{fileName:"C:/Curately-aws-demo-test/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Settings/AddVideoList/AddVideo.tsx",lineNumber:229,columnNumber:7},void 0),e.jsxDEV(F,{"aria-label":"close",onClick:x,sx:{position:"absolute",right:8,top:8,color:d=>d.palette.grey[500]},children:e.jsxDEV(ie,{},void 0,!1,{fileName:"C:/Curately-aws-demo-test/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Settings/AddVideoList/AddVideo.tsx",lineNumber:240,columnNumber:9},void 0)},void 0,!1,{fileName:"C:/Curately-aws-demo-test/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Settings/AddVideoList/AddVideo.tsx",lineNumber:230,columnNumber:7},void 0),e.jsxDEV(oe,{children:e.jsxDEV("div",{id:"AddVideo",className:"p-4",children:[L?e.jsxDEV("iframe",{src:L,ref:V,title:"Recording Video",className:"iframeInApp"},void 0,!1,{fileName:"C:/Curately-aws-demo-test/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Settings/AddVideoList/AddVideo.tsx",lineNumber:245,columnNumber:13},void 0):null,g?e.jsxDEV(D,{alignItems:"flex-end",spacing:2,py:1.5,children:[e.jsxDEV(pe,{fullWidth:!0,size:"small",label:"Video Title",placeholder:"Enter video title",name:"add_video",value:b.label,onChange:d=>v({...b,label:d.target.value})},void 0,!1,{fileName:"C:/Curately-aws-demo-test/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Settings/AddVideoList/AddVideo.tsx",lineNumber:255,columnNumber:17},void 0),e.jsxDEV(I,{variant:"contained",onClick:M,children:"Update"},void 0,!1,{fileName:"C:/Curately-aws-demo-test/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Settings/AddVideoList/AddVideo.tsx",lineNumber:266,columnNumber:17},void 0)]},void 0,!0,{fileName:"C:/Curately-aws-demo-test/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Settings/AddVideoList/AddVideo.tsx",lineNumber:254,columnNumber:15},void 0):null]},void 0,!0,{fileName:"C:/Curately-aws-demo-test/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Settings/AddVideoList/AddVideo.tsx",lineNumber:243,columnNumber:9},void 0)},void 0,!1,{fileName:"C:/Curately-aws-demo-test/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Settings/AddVideoList/AddVideo.tsx",lineNumber:242,columnNumber:7},void 0),!h&&e.jsxDEV(le,{children:[e.jsxDEV(I,{variant:"outlined",type:"button",size:"small",color:"secondary",className:"mr-2",onClick:x,children:"Cancel"},void 0,!1,{fileName:"C:/Curately-aws-demo-test/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Settings/AddVideoList/AddVideo.tsx",lineNumber:277,columnNumber:11},void 0),e.jsxDEV(I,{color:"primary",variant:"contained",size:"small",onClick:P,children:"Update Video"},void 0,!1,{fileName:"C:/Curately-aws-demo-test/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Settings/AddVideoList/AddVideo.tsx",lineNumber:289,columnNumber:11},void 0)]},void 0,!0,{fileName:"C:/Curately-aws-demo-test/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Settings/AddVideoList/AddVideo.tsx",lineNumber:276,columnNumber:9},void 0)]},void 0,!0,{fileName:"C:/Curately-aws-demo-test/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Settings/AddVideoList/AddVideo.tsx",lineNumber:228,columnNumber:5},void 0)},dt=()=>{o.checkSettings(110005)===5||o.checkSettings(110005),o.checkSettings(110005);let E=o.getvalue("clientId"),y=o.getvalue("recrId");const[h,i]=a.useState([]),[j,T]=a.useState({Cameratagid:"",autoId:"",clientId:"",createdDate:"",label:"",recrId:"",recrName:""}),[c,x]=a.useState(!1),[L,p]=a.useState(""),[b,v]=a.useState({}),[g,N]=a.useState(!1),[V,u]=a.useState({pageIndex:0,pageSize:10}),[M,P]=a.useState(0),[d,n]=a.useState(""),[S,q]=a.useState([{desc:!0,id:"createdDate"}]),[k,J]=a.useState("myVideos"),C=a.useCallback(K.debounce(()=>{let t={recrId:k==="myVideos"?o.getvalue("recrId"):0,clientId:o.getvalue("clientId")};w(A.postWithData("admin","getVideoList",t).then(s=>{var m;let l=s.data.videoDetails;console.log(l,"Test..");for(let f=0;f<l.length;f++)((m=l[f].createdDate)==null?void 0:m.length)>19&&(l[f].createdDate=be.ServerEDTToSystem(l[f].createdDate.substring(0,19),"yyyy-MM-dd hh:mm:ss","MM/dd/yyyy hh:mm a"));i(s.data.videoDetails),P(s.data.videoDetails.length)}))},400),[k]);a.useEffect(()=>{C()},[C]);const O=K.debounce(C,300);a.useEffect(()=>{u(t=>({...t,pageIndex:0}))},[d]);const Q=()=>{T({Cameratagid:"",autoId:"",clientId:"",createdDate:"",label:"",recrId:"",recrName:""}),N(!0),x(!1)},X=t=>{N(!1),t&&C()};a.useEffect(()=>{!g&&O()},[]);const Y=(t,s)=>{ne(`Are you sure you want to delete ${s} video ?`,()=>{Z(t)})},Z=t=>{w(A.deleteById("admin",`deleteVideo/${t}`,E).then(s=>{s.data.Success?(r("Video has been deleted successfully.","success"),C()):r(s.data.Message?s.data.Message:"An error occured while deleting","error")}).catch(s=>{var l,m,f,$;r((m=(l=s.response)==null?void 0:l.data)!=null&&m.Message?($=(f=s.response)==null?void 0:f.data)==null?void 0:$.Message:"An error occured while deleting","error")}))},[U,z]=a.useState(!1),[B,W]=a.useState(""),ee=(t,s)=>{W(t),z(!0),p(s)},te=()=>{z(!1),W(""),p("")},ae=a.useMemo(()=>[{accessorKey:"label",header:"Name",enableColumnPinning:!0,size:150},{accessorKey:"recrName",header:"Owner",enableColumnPinning:!0,size:150},{accessorKey:"createdDate",header:"Created On",size:150},{accessorKey:"Actions",header:"Actions",enableSorting:!1,Cell:({row:t})=>{const l=t.original.recrId===y,m=t.original.cameratagId?t.original.cameratagId.startsWith("//")?`https:${t.original.cameratagId}`:t.original.cameratagId:null;return e.jsxDEV(D,{direction:"row",spacing:1,sx:{width:150},children:e.jsxDEV(D,{direction:"row",spacing:2,sx:{width:"100%",justifyContent:"space-between",alignItems:"center"},children:[m&&e.jsxDEV(_,{title:"Open Video",placement:"top",color:"primary",children:e.jsxDEV(F,{onClick:()=>ee(m,t.original.label),children:e.jsxDEV(ue,{},void 0,!1,{fileName:"C:/Curately-aws-demo-test/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Settings/AddVideoList/AddVideoList.tsx",lineNumber:317,columnNumber:45},void 0)},void 0,!1,{fileName:"C:/Curately-aws-demo-test/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Settings/AddVideoList/AddVideoList.tsx",lineNumber:312,columnNumber:41},void 0)},void 0,!1,{fileName:"C:/Curately-aws-demo-test/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Settings/AddVideoList/AddVideoList.tsx",lineNumber:311,columnNumber:37},void 0),e.jsxDEV(D,{direction:"row",spacing:1,sx:{visibility:l?"visible":"hidden",width:"100%"},children:t.original.recrId===o.getvalue("recrId")&&e.jsxDEV(_,{title:"Delete",placement:"top",color:"primary",children:e.jsxDEV(F,{onClick:()=>Y(t.original.autoId,t.original.label),children:e.jsxDEV(ce,{},void 0,!1,{fileName:"C:/Curately-aws-demo-test/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Settings/AddVideoList/AddVideoList.tsx",lineNumber:349,columnNumber:49},void 0)},void 0,!1,{fileName:"C:/Curately-aws-demo-test/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Settings/AddVideoList/AddVideoList.tsx",lineNumber:341,columnNumber:45},void 0)},void 0,!1,{fileName:"C:/Curately-aws-demo-test/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Settings/AddVideoList/AddVideoList.tsx",lineNumber:340,columnNumber:41},void 0)},void 0,!1,{fileName:"C:/Curately-aws-demo-test/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Settings/AddVideoList/AddVideoList.tsx",lineNumber:321,columnNumber:33},void 0)]},void 0,!0,{fileName:"C:/Curately-aws-demo-test/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Settings/AddVideoList/AddVideoList.tsx",lineNumber:301,columnNumber:29},void 0)},t.original.autoId,!1,{fileName:"C:/Curately-aws-demo-test/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Settings/AddVideoList/AddVideoList.tsx",lineNumber:295,columnNumber:25},void 0)},size:150}],[]),de=(t,s)=>{console.log(s),J(s),u(l=>({...l,pageIndex:0}))},R=t=>{A.saveAuditLog(t)};return a.useEffect(()=>{R(4296)},[]),e.jsxDEV("div",{className:"emailTemplateList pt-3 px-5",id:"sourceList",children:[e.jsxDEV(G,{container:!0,direction:"row",className:"customCard px-4 py-2",justifyContent:"space-between",alignItems:"center",display:"flex",sx:{minHeight:"auto !important"},children:[e.jsxDEV(re,{variant:"h6",className:"headerName",children:"Videos"},void 0,!1,{fileName:"C:/Curately-aws-demo-test/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Settings/AddVideoList/AddVideoList.tsx",lineNumber:392,columnNumber:17},void 0),e.jsxDEV(D,{direction:"row",className:"btn-container",children:e.jsxDEV(I,{variant:"contained",color:"primary",size:"small",onClick:Q,children:"Add Video"},void 0,!1,{fileName:"C:/Curately-aws-demo-test/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Settings/AddVideoList/AddVideoList.tsx",lineNumber:396,columnNumber:21},void 0)},void 0,!1,{fileName:"C:/Curately-aws-demo-test/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Settings/AddVideoList/AddVideoList.tsx",lineNumber:395,columnNumber:17},void 0)]},void 0,!0,{fileName:"C:/Curately-aws-demo-test/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Settings/AddVideoList/AddVideoList.tsx",lineNumber:383,columnNumber:13},void 0),e.jsxDEV(G,{sx:{width:"calc(100%)"},children:e.jsxDEV(Ne,{value:k,onChange:de,className:"tableTabs","aria-label":"template tabs",children:[e.jsxDEV(H,{value:"myVideos",label:"My Videos",onClick:()=>R(4255)},void 0,!1,{fileName:"C:/Curately-aws-demo-test/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Settings/AddVideoList/AddVideoList.tsx",lineNumber:411,columnNumber:21},void 0),e.jsxDEV(H,{value:"allVideos",label:"All Videos",onClick:()=>R(4256)},void 0,!1,{fileName:"C:/Curately-aws-demo-test/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Settings/AddVideoList/AddVideoList.tsx",lineNumber:412,columnNumber:21},void 0)]},void 0,!0,{fileName:"C:/Curately-aws-demo-test/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Settings/AddVideoList/AddVideoList.tsx",lineNumber:407,columnNumber:17},void 0)},void 0,!1,{fileName:"C:/Curately-aws-demo-test/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Settings/AddVideoList/AddVideoList.tsx",lineNumber:406,columnNumber:13},void 0),e.jsxDEV("div",{className:"MRTableCustom  pl-0 ",children:e.jsxDEV(fe,{columns:ae,data:h,state:{rowSelection:b,pagination:V,globalFilter:d},enablePinning:!0,enableStickyHeader:!0,initialState:{columnPinning:{left:["mrt-row-select","recrName"]},density:"compact",showGlobalFilter:!0},muiPaginationProps:{rowsPerPageOptions:[10],showFirstButton:!1,showLastButton:!1,SelectProps:{style:{display:"none"}}},enablePagination:!0,renderBottomToolbarCustomActions:()=>e.jsxDEV(ge,{page:V.pageIndex,rowsPerPage:10,rowCount:M,onChangePage:t=>u({...V,pageIndex:t,pageSize:10}),showCount:!1},void 0,!1,{fileName:"C:/Curately-aws-demo-test/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Settings/AddVideoList/AddVideoList.tsx",lineNumber:444,columnNumber:25},void 0),onGlobalFilterChange:n,enableSorting:!0,onSortingChange:q,enableDensityToggle:!1,enableFullScreenToggle:!0,enableGlobalFilterModes:!0,columnResizeMode:"onChange",onPaginationChange:u,getRowId:t=>t.autoId,icons:{ArrowDownwardIcon:t=>e.jsxDEV(me,{...t},void 0,!1,{fileName:"C:/Curately-aws-demo-test/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Settings/AddVideoList/AddVideoList.tsx",lineNumber:471,columnNumber:29},void 0)},rowCount:h.length},void 0,!1,{fileName:"C:/Curately-aws-demo-test/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Settings/AddVideoList/AddVideoList.tsx",lineNumber:416,columnNumber:17},void 0)},void 0,!1,{fileName:"C:/Curately-aws-demo-test/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Settings/AddVideoList/AddVideoList.tsx",lineNumber:415,columnNumber:13},void 0),B&&U?e.jsxDEV(he,{url:B,open:U,closePopup:()=>te()},void 0,!1,{fileName:"C:/Curately-aws-demo-test/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Settings/AddVideoList/AddVideoList.tsx",lineNumber:481,columnNumber:21},void 0):null,g?e.jsxDEV(Ce,{open:g,handleClose:X,videoData:j,add:!c,onVideoSaveSuccess:O},void 0,!1,{fileName:"C:/Curately-aws-demo-test/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Settings/AddVideoList/AddVideoList.tsx",lineNumber:487,columnNumber:17},void 0):null]},void 0,!0,{fileName:"C:/Curately-aws-demo-test/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Settings/AddVideoList/AddVideoList.tsx",lineNumber:382,columnNumber:9},void 0)};export{dt as default};
