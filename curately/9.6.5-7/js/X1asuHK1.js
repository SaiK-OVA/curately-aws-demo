import{r as s,k as t,O as g,T as k,S as C,B as K,L as u,A as x,V as O}from"./Da4I77gy.js";import{D as c,A as W,g as A}from"./Bu7qOu7j.js";import{M as B}from"./DCKGuMgj.js";import{C as $}from"./CYG5EPlH.js";import{M as G}from"./DWuqg113.js";import{C as H}from"./DFZziAyB.js";import{L as _,D as E}from"./D4E8Ilzm.js";import"./DR5LSZrV.js";import"./Bfaybex0.js";import"./D8Uve2Qz.js";import"./DGAwO83Z.js";import"./DrwwBJQC.js";import"./BAhGwoeq.js";import"./DKbR-AmK.js";import"./DRaa5a1K.js";import"./CNGds3kx.js";import"./CTncTM4t.js";import"./Dw4YnGpZ.js";import"./DtpZK6Fd.js";import"./Cb9wbhoa.js";import"./BSRMXGwI.js";import"./M012vGJb.js";import"./YFmo1cJD.js";import"./Ca_RVXIc.js";import"./DGhwAF8n.js";import"./BtfZ3YdN.js";import"./Bt1msObo.js";import"./DVcNEn01.js";import"./DwQ4byYi.js";import"./Bob0wRh9.js";const Ae=({type:r,closeInvitePopup:U})=>{const[R,S]=s.useState([]),[y,p]=s.useState(c.now().minus({month:1})),[d,N]=s.useState(c.now()),[j,v]=s.useState(!1),[P,b]=s.useState(!1),[f,V]=s.useState({pageIndex:0,pageSize:10}),[w,M]=s.useState(0),I=e=>{window.open(A.getWindowLocation()+"candidate/view/"+e)},T=e=>{window.open(A.getWindowLocation()+"contact/view/"+e)},L=[{accessorKey:"name",header:"Name",accessorFn:e=>`${e.firstname} ${e.lastname}`,Cell:({row:e})=>{var a,m;const o=e.original.firstname?(a=e.original.firstname)==null?void 0:a.toLowerCase():"",l=e.original.lastname?(m=e.original.lastname)==null?void 0:m.toLowerCase():"";return t.jsxDEV("span",{className:"hightLightTd",onClick:()=>{Number(e.original.type)===1?I(e.original.userid):Number(e.original.type)===2&&T(e.original.userid)},children:o+" "+l},void 0,!1,{fileName:"C:/Curately-aws-demo-test/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Reports/Activitylog/Activitylog.tsx",lineNumber:56,columnNumber:24},void 0)}},{accessorKey:"actiondate",header:"Date",Cell:({row:e})=>{var o,l;return t.jsxDEV("span",{children:e.original.actiondate&&((o=e.original.actiondate)==null?void 0:o.length)>11?c.fromFormat(((l=e.original.actiondate)==null?void 0:l.substring(0,19))||"","yyyy-MM-dd hh:mm:ss").toFormat("MM/dd/yyyy hh:mm"):""},void 0,!1,{fileName:"C:/Curately-aws-demo-test/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Reports/Activitylog/Activitylog.tsx",lineNumber:69,columnNumber:17},void 0)},size:120},{accessorKey:"actionname",header:"Accessed Info",Cell:({row:e})=>t.jsxDEV("span",{children:e.original.actionname==="Save Email"?"Email Address":e.original.actionname==="Save Phone No"?"Mobile Number":e.original.actionname==="Referral Recruiter"?"Recruiter Referred":e.original.actionname},void 0,!1,{fileName:"C:/Curately-aws-demo-test/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Reports/Activitylog/Activitylog.tsx",lineNumber:80,columnNumber:17},void 0),size:120},{accessorKey:"contactinfo",header:"Contact Info",Cell:({row:e})=>{let o=r&&e.original.contactinfo?e.original.contactinfo:"";if(!r&&e.original.contactinfo){let l=e.original.contactinfo.split(",")[0],a=e.original.contactinfo.split(",").length>1?e.original.contactinfo.split(",")[1]:e.original.contactinfo.split(",")[0];o=e.original.actionname==="Save Email"?l:e.original.actionname==="Save Phone No"?a:""}return t.jsxDEV("span",{children:o},void 0,!1,{fileName:"C:/Curately-aws-demo-test/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Reports/Activitylog/Activitylog.tsx",lineNumber:98,columnNumber:24},void 0)}},{accessorKey:"emailCredits",header:"Credits",Cell:({row:e})=>t.jsxDEV("span",{className:"fw-7 fs-16",children:e.original.emailCredits==="1"&&e.original.phoneCredits==="1"?t.jsxDEV("span",{className:"c-red",children:"2"},void 0,!1,{fileName:"C:/Curately-aws-demo-test/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Reports/Activitylog/Activitylog.tsx",lineNumber:110,columnNumber:102},void 0):t.jsxDEV(t.Fragment,{children:[e.original.emailCredits==="1"?t.jsxDEV("span",{className:"c-red",children:"1"},void 0,!1,{fileName:"C:/Curately-aws-demo-test/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Reports/Activitylog/Activitylog.tsx",lineNumber:112,columnNumber:72},void 0):e.original.emailCredits?t.jsxDEV("span",{className:"c-green",children:e.original.emailCredits},void 0,!1,{fileName:"C:/Curately-aws-demo-test/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Reports/Activitylog/Activitylog.tsx",lineNumber:112,columnNumber:135},void 0):t.jsxDEV(t.Fragment,{},void 0,!1,{fileName:"C:/Curately-aws-demo-test/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Reports/Activitylog/Activitylog.tsx",lineNumber:112,columnNumber:198},void 0),e.original.phoneCredits==="1"?t.jsxDEV("span",{className:"c-red",children:"1"},void 0,!1,{fileName:"C:/Curately-aws-demo-test/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Reports/Activitylog/Activitylog.tsx",lineNumber:113,columnNumber:72},void 0):e.original.phoneCredits?t.jsxDEV("span",{className:"c-green",children:e.original.phoneCredits},void 0,!1,{fileName:"C:/Curately-aws-demo-test/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Reports/Activitylog/Activitylog.tsx",lineNumber:113,columnNumber:135},void 0):t.jsxDEV(t.Fragment,{},void 0,!1,{fileName:"C:/Curately-aws-demo-test/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Reports/Activitylog/Activitylog.tsx",lineNumber:113,columnNumber:198},void 0)]},void 0,!0,{fileName:"C:/Curately-aws-demo-test/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Reports/Activitylog/Activitylog.tsx",lineNumber:111,columnNumber:29},void 0)},void 0,!1,{fileName:"C:/Curately-aws-demo-test/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Reports/Activitylog/Activitylog.tsx",lineNumber:108,columnNumber:17},void 0),size:70,maxSize:70}],h=e=>{if(v(!!(y&&d)),y&&d){b(!0);let o={recrId:u.getvalue("recrId"),clientId:u.getvalue("clientId"),page_size:10,page_num:e};r&&(o.type=r),r||(o.fromDate=y.toFormat("yyyy-MM-dd"),o.toDate=d.toFormat("yyyy-MM-dd")),x.postWithData("admin","chrome-extension/activity-log",o).then(l=>{var m,D;let a=(m=l.data)!=null&&m.activityLogData?(D=l.data)==null?void 0:D.activityLogData:[];for(let i=0;i<a.length;i++)a[i].emailCredits=["Save Phone No and Email","Save Email"].includes(a[i].actionname)?"1":["4569","4577","4579","4581","4582"].includes(a[i].actionid)?"50":["4570","4578","4580"].includes(a[i].actionid)?"600":["4571","4575","4583"].includes(a[i].actionid)?"750":["4572","4576","4584"].includes(a[i].actionid)?"9000":["4573","4585","4587"].includes(a[i].actionid)?"1000":["4574","4586","4588"].includes(a[i].actionid)?"12000":["4589","4590"].includes(a[i].actionid)?"10":"",a[i].phoneCredits=["Save Phone No and Email","Save Phone No"].includes(a[i].actionname)?"1":["4573","4585","4587"].includes(a[i].actionid)?"100":["4574","4586","4588"].includes(a[i].actionid)?"1200":"";S(a),e===0&&M(l.data.totalRecords),b(!1)})}else O("Please Enter Date","error")},[n,F]=s.useState({consumedEmailCredits:0,consumedProfileCredits:0,consumedSmsCredits:0,daysLeft:0,totalEmailCredits:0,totalProfileCredits:0,totalSmsCredits:0,profilePercentage:0,startDate:"",expireDate:""}),z=()=>{x.getById("admin",`getCredits/${u.getvalue("clientId")}`,u.getvalue("recrId")).then(e=>{e.data.Success&&(F({consumedEmailCredits:e.data.consumedEmailCredits,consumedProfileCredits:e.data.consumedProfileCredits,consumedSmsCredits:e.data.paymentType===1||e.data.paymentType===2?0:e.data.consumedSmsCredits,daysLeft:e.data.daysLeft,totalEmailCredits:e.data.totalEmailCredits,totalProfileCredits:e.data.totalProfileCredits,totalSmsCredits:e.data.paymentType===1||e.data.paymentType===2?0:e.data.totalSmsCredits,profilePercentage:e.data.consumedProfileCredits/e.data.totalProfileCredits*100,startDate:e.data.startDate?c.fromFormat(e.data.startDate.substring(0,19),"yyyy-MM-dd hh:mm:ss").toFormat("MM/dd/yyyy "):"",expireDate:e.data.expireDate?c.fromFormat(e.data.expireDate.substring(0,19),"yyyy-MM-dd hh:mm:ss").toFormat("MM/dd/yyyy "):""}),localStorage.setItem(`credits_${u.getvalue("recrId")}`,JSON.stringify({consumedEmailCredits:e.data.consumedEmailCredits,consumedProfileCredits:e.data.consumedProfileCredits,consumedSmsCredits:e.data.paymentType===1||e.data.paymentType===2?0:e.data.consumedSmsCredits,daysLeft:e.data.daysLeft,totalEmailCredits:e.data.totalEmailCredits,totalProfileCredits:e.data.totalProfileCredits,totalSmsCredits:e.data.paymentType===1||e.data.paymentType===2?0:e.data.totalSmsCredits,profilePercentage:e.data.consumedProfileCredits/e.data.totalProfileCredits*100,isPackageEmailValidity:Number(e.data.totalEmailCredits)?Number(e.data.totalEmailCredits)>Number(e.data.consumedEmailCredits):!1,isPackagePhoneValidity:e.data.paymentType!==1&&e.data.paymentType!==2&&Number(e.data.totalSmsCredits)?!!(Number(e.data.totalSmsCredits)-Number(e.data.consumedSmsCredits)):!1,startDate:e.data.startDate?c.fromFormat(e.data.startDate.substring(0,19),"yyyy-MM-dd hh:mm:ss").toFormat("MM/dd/yyyy "):"",expireDate:e.data.expireDate?c.fromFormat(e.data.expireDate.substring(0,19),"yyyy-MM-dd hh:mm:ss").toFormat("MM/dd/yyyy "):""})))})};return s.useEffect(()=>{h(f.pageIndex)},[f.pageIndex]),s.useEffect(()=>{z()},[]),t.jsxDEV("div",{className:"px-5",id:"ActivityLog",children:[r?null:t.jsxDEV("div",{className:"pt-3",children:t.jsxDEV(g,{container:!0,direction:"row",className:"customCard px-4 py-2 mb-2",justifyContent:"flex-start",alignItems:"center",display:"flex",sx:{minHeight:"auto !important"},children:t.jsxDEV(k,{variant:"h6",className:"headerName",children:"Usage Report"},void 0,!1,{fileName:"C:/Curately-aws-demo-test/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Reports/Activitylog/Activitylog.tsx",lineNumber:257,columnNumber:29},void 0)},void 0,!1,{fileName:"C:/Curately-aws-demo-test/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Reports/Activitylog/Activitylog.tsx",lineNumber:248,columnNumber:25},void 0)},void 0,!1,{fileName:"C:/Curately-aws-demo-test/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Reports/Activitylog/Activitylog.tsx",lineNumber:247,columnNumber:21},void 0),r?null:t.jsxDEV("div",{children:t.jsxDEV(g,{className:"mt-1 mb-3 customCard activityLogDate py-3",container:!0,direction:"row",justifyContent:"space-between",alignItems:"center",children:[t.jsxDEV(C,{direction:"row",spacing:3,style:{paddingRight:"22px"},children:[t.jsxDEV(_,{dateAdapter:W,children:t.jsxDEV(g,{container:!0,direction:"row",justifyContent:"flex-start",alignItems:"center",spacing:2,children:[t.jsxDEV(E,{value:y,onChange:e=>{p(e||"")},slotProps:{textField:{size:"small",fullWidth:!1,InputProps:{style:{textAlign:"center"}}}},maxDate:d},void 0,!1,{fileName:"C:/Curately-aws-demo-test/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Reports/Activitylog/Activitylog.tsx",lineNumber:284,columnNumber:41},void 0),t.jsxDEV(E,{value:d,onChange:(e,o)=>{N(e||"")},slotProps:{textField:{size:"small",fullWidth:!1,InputProps:{style:{textAlign:"center"}}}},maxDate:c.now()},void 0,!1,{fileName:"C:/Curately-aws-demo-test/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Reports/Activitylog/Activitylog.tsx",lineNumber:306,columnNumber:41},void 0)]},void 0,!0,{fileName:"C:/Curately-aws-demo-test/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Reports/Activitylog/Activitylog.tsx",lineNumber:278,columnNumber:37},void 0)},void 0,!1,{fileName:"C:/Curately-aws-demo-test/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Reports/Activitylog/Activitylog.tsx",lineNumber:277,columnNumber:33},void 0),t.jsxDEV(g,{container:!0,direction:"row",justifyContent:"flex-start",alignItems:"center",spacing:2,children:t.jsxDEV(K,{variant:"contained",onClick:()=>{h(0)},children:["Get ",r?"Credits":"Report"]},void 0,!0,{fileName:"C:/Curately-aws-demo-test/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Reports/Activitylog/Activitylog.tsx",lineNumber:336,columnNumber:37},void 0)},void 0,!1,{fileName:"C:/Curately-aws-demo-test/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Reports/Activitylog/Activitylog.tsx",lineNumber:330,columnNumber:33},void 0)]},void 0,!0,{fileName:"C:/Curately-aws-demo-test/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Reports/Activitylog/Activitylog.tsx",lineNumber:276,columnNumber:29},void 0),n.totalProfileCredits&&n.totalSmsCredits?t.jsxDEV(C,{direction:"row",spacing:3,children:[t.jsxDEV(C,{direction:"row",className:"mr-4",children:[t.jsxDEV("span",{className:"mr-2",children:"Credits Remaining"},void 0,!1,{fileName:"C:/Curately-aws-demo-test/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Reports/Activitylog/Activitylog.tsx",lineNumber:343,columnNumber:45},void 0),t.jsxDEV(G,{className:"mr-1"},void 0,!1,{fileName:"C:/Curately-aws-demo-test/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Reports/Activitylog/Activitylog.tsx",lineNumber:344,columnNumber:45},void 0),t.jsxDEV("span",{className:"mr-3",children:n.totalProfileCredits-n.consumedProfileCredits},void 0,!1,{fileName:"C:/Curately-aws-demo-test/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Reports/Activitylog/Activitylog.tsx",lineNumber:345,columnNumber:45},void 0),t.jsxDEV(H,{className:"mr-1"},void 0,!1,{fileName:"C:/Curately-aws-demo-test/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Reports/Activitylog/Activitylog.tsx",lineNumber:347,columnNumber:45},void 0),t.jsxDEV("span",{children:n.totalSmsCredits-n.consumedSmsCredits},void 0,!1,{fileName:"C:/Curately-aws-demo-test/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Reports/Activitylog/Activitylog.tsx",lineNumber:348,columnNumber:45},void 0)]},void 0,!0,{fileName:"C:/Curately-aws-demo-test/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Reports/Activitylog/Activitylog.tsx",lineNumber:342,columnNumber:41},void 0),t.jsxDEV(C,{direction:"row",children:t.jsxDEV("span",{className:"mr-2",children:["Valid from ",n.startDate," to ",n.expireDate]},void 0,!0,{fileName:"C:/Curately-aws-demo-test/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Reports/Activitylog/Activitylog.tsx",lineNumber:351,columnNumber:45},void 0)},void 0,!1,{fileName:"C:/Curately-aws-demo-test/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Reports/Activitylog/Activitylog.tsx",lineNumber:350,columnNumber:41},void 0)]},void 0,!0,{fileName:"C:/Curately-aws-demo-test/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Reports/Activitylog/Activitylog.tsx",lineNumber:341,columnNumber:37},void 0):null]},void 0,!0,{fileName:"C:/Curately-aws-demo-test/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Reports/Activitylog/Activitylog.tsx",lineNumber:268,columnNumber:25},void 0)},void 0,!1,{fileName:"C:/Curately-aws-demo-test/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Reports/Activitylog/Activitylog.tsx",lineNumber:267,columnNumber:21},void 0),t.jsxDEV("div",{className:r?"inPopUp":"",children:j?t.jsxDEV("div",{className:"MRTableCustom  pl-0 ",children:t.jsxDEV(B,{columns:L,data:R,enableDensityToggle:!1,enableColumnFilters:!1,enableFullScreenToggle:!1,enableGlobalFilter:!1,enableHiding:!1,enableColumnActions:!1,enablePagination:!1,enableTopToolbar:!1,enableStickyHeader:!0,state:{isLoading:P},renderBottomToolbarCustomActions:()=>t.jsxDEV($,{page:f.pageIndex,rowsPerPage:10,rowCount:w,onChangePage:e=>V({...f,pageIndex:e,pageSize:10})},void 0,!1,{fileName:"C:/Curately-aws-demo-test/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Reports/Activitylog/Activitylog.tsx",lineNumber:381,columnNumber:33},void 0)},void 0,!1,{fileName:"C:/Curately-aws-demo-test/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Reports/Activitylog/Activitylog.tsx",lineNumber:365,columnNumber:25},void 0)},void 0,!1,{fileName:"C:/Curately-aws-demo-test/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Reports/Activitylog/Activitylog.tsx",lineNumber:364,columnNumber:21},void 0):null},void 0,!1,{fileName:"C:/Curately-aws-demo-test/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Reports/Activitylog/Activitylog.tsx",lineNumber:362,columnNumber:13},void 0)]},void 0,!0,{fileName:"C:/Curately-aws-demo-test/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Reports/Activitylog/Activitylog.tsx",lineNumber:244,columnNumber:9},void 0)};export{Ae as default};
