import{Y as X,r as i,R as Z,L as m,A as N,k as e,S as I,B as c,b1 as ee,O as d,T as te,D as T,n as S,o as F,V as p,W as ae}from"./Da4I77gy.js";import{V as le}from"./i9j56vBy.js";import{E as ie,b as se,c as re}from"./D4E8Ilzm.js";import{D as me}from"./BM75X-kx.js";import{l as oe,D as ne}from"./Bu7qOu7j.js";import{S as ue}from"./BcvtPrAc.js";import{M as de}from"./DCKGuMgj.js";import{E as ce}from"./Co3q3mX7.js";import{T as f}from"./D8Uve2Qz.js";import{B as pe}from"./BAD9UWAF.js";import{D as M}from"./BtfZ3YdN.js";import{D as fe}from"./Bt1msObo.js";import"./DrwwBJQC.js";import"./DR5LSZrV.js";import"./YFmo1cJD.js";import"./DGAwO83Z.js";import"./BAhGwoeq.js";import"./Bfaybex0.js";import"./DKbR-AmK.js";import"./DRaa5a1K.js";import"./CNGds3kx.js";import"./CTncTM4t.js";import"./Dw4YnGpZ.js";import"./DtpZK6Fd.js";import"./Cb9wbhoa.js";import"./BSRMXGwI.js";import"./M012vGJb.js";import"./Ca_RVXIc.js";import"./DGhwAF8n.js";import"./DVcNEn01.js";import"./DwQ4byYi.js";import"./Bob0wRh9.js";import"./D7ld7k1a.js";import"./BRh2WteL.js";import"./MGFt9yJK.js";import"./BQvNjWLp.js";import"./rYcqsWUw.js";import"./BiHCwA5A.js";import"./BsB7p8DA.js";import"./CPvg8iC8.js";const st=()=>{X();const[L,h]=i.useState(!1),[k,C]=i.useState([]),[ye,x]=Z.useState(!1),[be,R]=i.useState(!1),[Ee,y]=i.useState(!1),[P,Ne]=i.useState(!1),[A,D]=i.useState(0),[B,b]=i.useState(!1),[z,g]=i.useState(null),[E,H]=i.useState("My Templates"),[O,W]=i.useState({}),[G,$]=i.useState({pageIndex:0,pageSize:25}),[s,v]=i.useState({templateName:"",templateId:"",subject:"",description:"",jsonFile:"",htmlFile:"",createdBy:m.getvalue("recrId"),type:1,isActive:!0,clientId:m.getvalue("clientId")}),K=(a,t)=>{H(t),u()},_=["All","My Templates"],J=()=>{g(""),b(!0)},Y=a=>{q(a)},w=a=>{g(a),b(!0)},q=async a=>{ae(N.getById("admin","getEmailBuilderTemplatesListById",(a||"")+"/"+m.getvalue("clientId")).then(async t=>{var l,o,n;(l=t.data)!=null&&l.EmailTemplates&&((o=t.data)!=null&&o.EmailTemplates.length)&&((n=t.data)!=null&&n.EmailTemplates[0])&&t.data.EmailTemplates[0].jsonFile?v({templateName:t.data.EmailTemplates[0].templateName?t.data.EmailTemplates[0].templateName:"",templateId:a||"",subject:t.data.EmailTemplates[0].subject?t.data.EmailTemplates[0].subject:"",description:t.data.EmailTemplates[0].description?t.data.EmailTemplates[0].description:"",jsonFile:t.data.EmailTemplates[0].jsonFile?JSON.stringify(t.data.EmailTemplates[0].jsonFile):"",htmlFile:t.data.EmailTemplates[0].htmlFile?t.data.EmailTemplates[0].htmlFile:"",createdBy:m.getvalue("recrId"),type:1,isActive:!0,clientId:m.getvalue("clientId")}):(v({templateName:"",templateId:"",subject:"",description:"",jsonFile:"",htmlFile:"",createdBy:m.getvalue("recrId"),type:1,isActive:!0,clientId:m.getvalue("clientId")}),p("Error loading template","error")),h(!0)}).catch(t=>{console.error("Error:",t)}))},Q=async a=>{let t=m.getvalue("clientId");try{N.deleteById(214,`deleteEmailTemplates/${a}`,t).then(l=>{x(!1),l.data.Success===!0?(p(l.data.Message,"success"),R(o=>!o)):l.data.Error===!0?p(l.data.Message,"error"):p("Something went wrong","error")}).catch(l=>{console.error("Error:",l)})}catch{x(!1)}},j=()=>{b(!1)},V=()=>{h(!1),u()},u=i.useCallback(oe.debounce(async()=>{y(!1);const a=m.getvalue("clientId");let t="0";E==="My Templates"&&(t=m.getvalue("recrId")),N.getCall(214,`getEmailBuilderTemplatesList/${t}/${a}`).then(l=>{if(l.data&&l.data.List){let o=[];for(let n=0;n<l.data.List.length;n++){const r=l.data.List[n];r.type!==0&&o.push({templateId:r.templateId,templateName:r.templateName,description:r.description,subject:r.subject,type:r.type,isactive:r.isactive,createdBy:r.createdBy,createdDate:r.createdDate,modifyBy:r.modifyBy,modifyDate:r.modifyDate})}C(o),D(o.length)}else console.error("List data is undefined."),C([]),D(0);y(!0)}).catch(l=>{console.error("Error:",l),y(!0)})},400),[E]);i.useEffect(()=>(u(),()=>{u.cancel()}),[u]);const U=i.useMemo(()=>[{enableColumnPinning:!0,accessorKey:"templateName",header:"Name",size:300,Cell:({renderedCellValue:a,row:t})=>{let l=t.original.templateName.length>30?t.original.templateName.slice(0,30)+"...":t.original.templateName;return e.jsxDEV(f,{title:t.original.templateName,classes:{tooltip:"tt-capital"},children:e.jsxDEV("span",{className:"hightLightTd",onClick:()=>w(t.original.templateId),children:l},void 0,!1,{fileName:"C:/Curately-aws-demo-test/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Letters/EmailBuilder/List/ListEmailBuilder.tsx",lineNumber:343,columnNumber:29},void 0)},void 0,!1,{fileName:"C:/Curately-aws-demo-test/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Letters/EmailBuilder/List/ListEmailBuilder.tsx",lineNumber:342,columnNumber:25},void 0)}},{accessorKey:"modifyDate",header:"Last Modified",accessorFn:a=>`${a.date}`,Cell:({renderedCellValue:a,row:t})=>e.jsxDEV("span",{children:t.original.modifyDate?ne.fromFormat(t.original.modifyDate.substring(0,19),"yyyy-MM-dd hh:mm:ss").toFormat("MM/dd/yyyy hh:mm a"):""},void 0,!1,{fileName:"C:/Curately-aws-demo-test/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Letters/EmailBuilder/List/ListEmailBuilder.tsx",lineNumber:358,columnNumber:21},void 0)},{accessorKey:"Actions",header:"Actions",Cell:({renderedCellValue:a,row:t})=>e.jsxDEV(I,{children:e.jsxDEV(pe,{variant:"outlined",id:t.original.templateId,sx:{height:"31px","& .MuiButtonGroup-grouped":{marginRight:"1px",border:"1px solid var(--c-neutral-40)"}},children:[e.jsxDEV(f,{title:"Edit",placement:"top",children:e.jsxDEV(c,{className:"customButtonForHover",sx:{borderColor:"var(--c-neutral-40)",backgroundColor:"#ffffff",color:"#919191",width:"33px"},onClick:()=>w(t.original.templateId),children:e.jsxDEV(ie,{sx:{fontSize:"16px"}},void 0,!1,{fileName:"C:/Curately-aws-demo-test/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Letters/EmailBuilder/List/ListEmailBuilder.tsx",lineNumber:416,columnNumber:37},void 0)},void 0,!1,{fileName:"C:/Curately-aws-demo-test/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Letters/EmailBuilder/List/ListEmailBuilder.tsx",lineNumber:405,columnNumber:33},void 0)},void 0,!1,{fileName:"C:/Curately-aws-demo-test/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Letters/EmailBuilder/List/ListEmailBuilder.tsx",lineNumber:401,columnNumber:29},void 0),e.jsxDEV(f,{title:"View",placement:"top",children:e.jsxDEV(c,{className:"customButtonForHover",sx:{borderColor:"var(--c-neutral-40)",backgroundColor:"#ffffff",color:"#919191",width:"33px"},onClick:()=>Y(t.original.templateId),children:e.jsxDEV(le,{sx:{fontSize:"16px"}},void 0,!1,{fileName:"C:/Curately-aws-demo-test/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Letters/EmailBuilder/List/ListEmailBuilder.tsx",lineNumber:441,columnNumber:37},void 0)},void 0,!1,{fileName:"C:/Curately-aws-demo-test/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Letters/EmailBuilder/List/ListEmailBuilder.tsx",lineNumber:430,columnNumber:33},void 0)},void 0,!1,{fileName:"C:/Curately-aws-demo-test/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Letters/EmailBuilder/List/ListEmailBuilder.tsx",lineNumber:426,columnNumber:29},void 0),e.jsxDEV(f,{title:"Delete",placement:"top",children:e.jsxDEV(c,{className:"customButtonForHover",sx:{borderColor:"var(--c-neutral-40)",backgroundColor:"#ffffff",color:"#919191",width:"33px"},onClick:()=>{ee("Are you sure you want to delete - "+t.original.templateName+"?",()=>Q(t.original.templateId))},children:e.jsxDEV(me,{sx:{fontSize:"16px"}},void 0,!1,{fileName:"C:/Curately-aws-demo-test/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Letters/EmailBuilder/List/ListEmailBuilder.tsx",lineNumber:471,columnNumber:37},void 0)},void 0,!1,{fileName:"C:/Curately-aws-demo-test/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Letters/EmailBuilder/List/ListEmailBuilder.tsx",lineNumber:455,columnNumber:33},void 0)},void 0,!1,{fileName:"C:/Curately-aws-demo-test/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Letters/EmailBuilder/List/ListEmailBuilder.tsx",lineNumber:451,columnNumber:29},void 0)]},void 0,!0,{fileName:"C:/Curately-aws-demo-test/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Letters/EmailBuilder/List/ListEmailBuilder.tsx",lineNumber:387,columnNumber:25},void 0)},t.original.templateId,!1,{fileName:"C:/Curately-aws-demo-test/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Letters/EmailBuilder/List/ListEmailBuilder.tsx",lineNumber:384,columnNumber:21},void 0)}],[]);return e.jsxDEV("div",{className:"emailTemplateList pt-3 px-5",children:[e.jsxDEV(d,{container:!0,direction:"row",className:"customCard px-4 py-2",justifyContent:"space-between",alignItems:"center",display:"flex",sx:{minHeight:"auto !important"},children:[e.jsxDEV(te,{variant:"h6",className:"headerName",children:"Templates"},void 0,!1,{fileName:"C:/Curately-aws-demo-test/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Letters/EmailBuilder/List/ListEmailBuilder.tsx",lineNumber:506,columnNumber:17},void 0),e.jsxDEV(I,{direction:"row",className:"btn-container",children:e.jsxDEV(c,{variant:"contained",color:"primary",size:"small",onClick:J,children:"Add Template"},void 0,!1,{fileName:"C:/Curately-aws-demo-test/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Letters/EmailBuilder/List/ListEmailBuilder.tsx",lineNumber:510,columnNumber:21},void 0)},void 0,!1,{fileName:"C:/Curately-aws-demo-test/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Letters/EmailBuilder/List/ListEmailBuilder.tsx",lineNumber:509,columnNumber:17},void 0)]},void 0,!0,{fileName:"C:/Curately-aws-demo-test/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Letters/EmailBuilder/List/ListEmailBuilder.tsx",lineNumber:497,columnNumber:13},void 0),e.jsxDEV(d,{container:!0,className:"customCard p-0 filterExpand-grid",children:[e.jsxDEV(d,{sx:{width:P?"calc(100%)":"calc(100% - 0px)"},children:e.jsxDEV("div",{className:"MRTableCustom  pl-0 ",children:[e.jsxDEV(se,{value:E,onChange:K,className:"tableTabs",children:_.map((a,t)=>e.jsxDEV(re,{value:a,label:e.jsxDEV("span",{children:a},void 0,!1,{fileName:"C:/Curately-aws-demo-test/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Letters/EmailBuilder/List/ListEmailBuilder.tsx",lineNumber:527,columnNumber:41},void 0)},t,!1,{fileName:"C:/Curately-aws-demo-test/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Letters/EmailBuilder/List/ListEmailBuilder.tsx",lineNumber:526,columnNumber:37},void 0))},void 0,!1,{fileName:"C:/Curately-aws-demo-test/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Letters/EmailBuilder/List/ListEmailBuilder.tsx",lineNumber:519,columnNumber:25},void 0),e.jsxDEV(de,{columns:U,enableRowSelection:!1,data:k,onRowSelectionChange:W,state:{rowSelection:O,pagination:G},enablePinning:!0,enableStickyHeader:!0,initialState:{columnPinning:{left:["mrt-row-select","templateName"]},density:"compact",showGlobalFilter:!1},enableDensityToggle:!1,enableFullScreenToggle:!0,enableColumnResizing:!0,enableFilters:!1,enableGlobalFilterModes:!0,columnResizeMode:"onChange",onPaginationChange:$,getRowId:a=>a.templateId,icons:{ArrowDownwardIcon:a=>e.jsxDEV(ue,{...a},void 0,!1,{fileName:"C:/Curately-aws-demo-test/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Letters/EmailBuilder/List/ListEmailBuilder.tsx",lineNumber:554,columnNumber:68},void 0)},rowCount:A},void 0,!1,{fileName:"C:/Curately-aws-demo-test/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Letters/EmailBuilder/List/ListEmailBuilder.tsx",lineNumber:532,columnNumber:25},void 0)]},void 0,!0,{fileName:"C:/Curately-aws-demo-test/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Letters/EmailBuilder/List/ListEmailBuilder.tsx",lineNumber:518,columnNumber:21},void 0)},void 0,!1,{fileName:"C:/Curately-aws-demo-test/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Letters/EmailBuilder/List/ListEmailBuilder.tsx",lineNumber:516,columnNumber:17},void 0),L?e.jsxDEV(T,{open:L,onClose:V,className:"Instructions",fullWidth:!0,maxWidth:"md",children:[e.jsxDEV(M,{className:"py-2",children:e.jsxDEV(d,{container:!0,direction:"row",justifyContent:"space-between",alignItems:"center",children:[e.jsxDEV("span",{children:s&&(s==null?void 0:s.templateName)},void 0,!1,{fileName:"C:/Curately-aws-demo-test/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Letters/EmailBuilder/List/ListEmailBuilder.tsx",lineNumber:592,columnNumber:37},void 0),e.jsxDEV("span",{onClick:V,className:"closePopup",children:e.jsxDEV(S,{},void 0,!1,{fileName:"C:/Curately-aws-demo-test/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Letters/EmailBuilder/List/ListEmailBuilder.tsx",lineNumber:596,columnNumber:41},void 0)},void 0,!1,{fileName:"C:/Curately-aws-demo-test/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Letters/EmailBuilder/List/ListEmailBuilder.tsx",lineNumber:595,columnNumber:37},void 0)]},void 0,!0,{fileName:"C:/Curately-aws-demo-test/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Letters/EmailBuilder/List/ListEmailBuilder.tsx",lineNumber:586,columnNumber:33},void 0)},void 0,!1,{fileName:"C:/Curately-aws-demo-test/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Letters/EmailBuilder/List/ListEmailBuilder.tsx",lineNumber:583,columnNumber:29},void 0),e.jsxDEV(fe,{},void 0,!1,{fileName:"C:/Curately-aws-demo-test/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Letters/EmailBuilder/List/ListEmailBuilder.tsx",lineNumber:600,columnNumber:29},void 0),e.jsxDEV(F,{sx:{p:0},children:s&&(s!=null&&s.htmlFile)?e.jsxDEV("div",{style:{padding:"20px"},dangerouslySetInnerHTML:{__html:s==null?void 0:s.htmlFile}},void 0,!1,{fileName:"C:/Curately-aws-demo-test/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Letters/EmailBuilder/List/ListEmailBuilder.tsx",lineNumber:604,columnNumber:41},void 0):null},void 0,!1,{fileName:"C:/Curately-aws-demo-test/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Letters/EmailBuilder/List/ListEmailBuilder.tsx",lineNumber:601,columnNumber:29},void 0)]},void 0,!0,{fileName:"C:/Curately-aws-demo-test/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Letters/EmailBuilder/List/ListEmailBuilder.tsx",lineNumber:582,columnNumber:25},void 0):null,B?e.jsxDEV(T,{maxWidth:"xl",open:B,onClose:j,fullWidth:!0,children:[e.jsxDEV(M,{id:"alert-dialog-title",children:e.jsxDEV(d,{container:!0,direction:"row",justifyContent:"space-between",alignItems:"center",children:[e.jsxDEV("span",{style:{fontWeight:"bold"},children:"Email Template "},void 0,!1,{fileName:"C:/Curately-aws-demo-test/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Letters/EmailBuilder/List/ListEmailBuilder.tsx",lineNumber:621,columnNumber:35},void 0),e.jsxDEV("span",{onClick:j,children:e.jsxDEV(S,{},void 0,!1,{fileName:"C:/Curately-aws-demo-test/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Letters/EmailBuilder/List/ListEmailBuilder.tsx",lineNumber:623,columnNumber:39},void 0)},void 0,!1,{fileName:"C:/Curately-aws-demo-test/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Letters/EmailBuilder/List/ListEmailBuilder.tsx",lineNumber:622,columnNumber:35},void 0)]},void 0,!0,{fileName:"C:/Curately-aws-demo-test/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Letters/EmailBuilder/List/ListEmailBuilder.tsx",lineNumber:615,columnNumber:23},void 0)},void 0,!1,{fileName:"C:/Curately-aws-demo-test/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Letters/EmailBuilder/List/ListEmailBuilder.tsx",lineNumber:614,columnNumber:23},void 0),e.jsxDEV(F,{children:e.jsxDEV(e.Fragment,{children:e.jsxDEV(ce,{templateId:z},void 0,!1,{fileName:"C:/Curately-aws-demo-test/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Letters/EmailBuilder/List/ListEmailBuilder.tsx",lineNumber:630,columnNumber:31},void 0)},void 0,!1,{fileName:"C:/Curately-aws-demo-test/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Letters/EmailBuilder/List/ListEmailBuilder.tsx",lineNumber:629,columnNumber:31},void 0)},void 0,!1,{fileName:"C:/Curately-aws-demo-test/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Letters/EmailBuilder/List/ListEmailBuilder.tsx",lineNumber:628,columnNumber:27},void 0)]},void 0,!0,{fileName:"C:/Curately-aws-demo-test/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Letters/EmailBuilder/List/ListEmailBuilder.tsx",lineNumber:613,columnNumber:23},void 0):null]},void 0,!0,{fileName:"C:/Curately-aws-demo-test/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Letters/EmailBuilder/List/ListEmailBuilder.tsx",lineNumber:514,columnNumber:13},void 0)]},void 0,!0,{fileName:"C:/Curately-aws-demo-test/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Letters/EmailBuilder/List/ListEmailBuilder.tsx",lineNumber:496,columnNumber:9},void 0)};export{st as default};
