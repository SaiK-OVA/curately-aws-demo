import{r as n,al as M,k as e,D as T,O as k,I as F,n as A,o as B,l as L,S as J,U as O,B as R,V as l,L as u,A as d}from"./Da4I77gy.js";import{u as W}from"./D7ld7k1a.js";import{c as $,a as H}from"./BRh2WteL.js";import{S as z,P as G,a as U}from"./Bu7qOu7j.js";import{D as q}from"./BtfZ3YdN.js";import{T as K}from"./DrwwBJQC.js";import{D as Q}from"./Bt1msObo.js";const fe=({dialogOpen:m,onClose:i,name:X,toPhone:Y,candidateId:h="",contactId:f="",workflowJobCandidateId:g="",contactName:Z,call:_,isBulkSMS:y,jobId:D})=>{const[ee,ae]=n.useState(""),[te,se]=n.useState(!1),[oe,ne]=n.useState(!1),{jobId:x}=M(),N=D||x,r=140,p=a=>{const s=a.target.value;a.target.value.length<=r&&t.setFieldValue("desc",s)},C={desc:""},b=$({desc:H().max(r,`Cannot exceed ${r} characters`)}),t=W({initialValues:C,onSubmit:()=>{},validationSchema:b}),P=()=>{if(t.values.desc){const a={clientId:u.getvalue("clientId"),userIds:h,recrId:u.getvalue("recrId"),jobId:N,contId:f,workflowJobCandId:g,body:t.values.desc};d.postWithData("admin","smsSent",a).then(s=>{s.data.Message==="Success"?(t.setFieldValue("desc",""),l("SMS has been sent successfully.","success"),j(4141),i()):l(s.data.Message,"error")})}else l("Please enter SMS to sent","warning")},o=n.useRef(),S=a=>{let s=o.current.selectionStart||0,E=o.current.value.substring(0,s),I=o.current.value.substring(s,o.current.value.length);const c=E+` {{${a}}} `+I;c.length>140?l("SMS body cannot exceed 140 characters.","error"):t.setFieldValue("desc",c),o.current.focus()},v=a=>{a.replace(/\n/g," ").length>140?l("SMS body cannot exceed 140 characters.","error"):t.setFieldValue("desc",a),o.current.focus()},[w,V]=n.useState(!1),j=a=>{d.saveAuditLog(a)};return e.jsxDEV(T,{maxWidth:"sm",fullWidth:!0,open:m,className:"AddJobModal",id:"PhoneDialog",children:[e.jsxDEV(q,{className:"header",children:e.jsxDEV(k,{container:!0,direction:"row",justifyContent:"space-between",alignItems:"center",children:[e.jsxDEV("span",{className:"addHeader",children:y?"Bulk SMS":"SMS"},void 0,!1,{fileName:"C:/Curately-aws-demo-test/curately-9.6.5/curately-9.6.5/src/components/shared/PhoneDialog/PhoneDialog.tsx",lineNumber:234,columnNumber:21},void 0),e.jsxDEV(F,{"aria-label":"close",onClick:i,className:"closeBtn",children:e.jsxDEV(A,{},void 0,!1,{fileName:"C:/Curately-aws-demo-test/curately-9.6.5/curately-9.6.5/src/components/shared/PhoneDialog/PhoneDialog.tsx",lineNumber:243,columnNumber:25},void 0)},void 0,!1,{fileName:"C:/Curately-aws-demo-test/curately-9.6.5/curately-9.6.5/src/components/shared/PhoneDialog/PhoneDialog.tsx",lineNumber:238,columnNumber:21},void 0)]},void 0,!0,{fileName:"C:/Curately-aws-demo-test/curately-9.6.5/curately-9.6.5/src/components/shared/PhoneDialog/PhoneDialog.tsx",lineNumber:228,columnNumber:17},void 0)},void 0,!1,{fileName:"C:/Curately-aws-demo-test/curately-9.6.5/curately-9.6.5/src/components/shared/PhoneDialog/PhoneDialog.tsx",lineNumber:227,columnNumber:13},void 0),e.jsxDEV(B,{sx:{px:0},children:e.jsxDEV(L,{className:"p-5 ",children:[e.jsxDEV(K,{color:"error",className:"typeCall mt-2",multiline:!0,rows:4,inputRef:o,placeholder:"Type SMS",value:t.values.desc,onChange:p,name:"desc",margin:"dense",id:"desc",type:"text",size:"small",fullWidth:!0},void 0,!1,{fileName:"C:/Curately-aws-demo-test/curately-9.6.5/curately-9.6.5/src/components/shared/PhoneDialog/PhoneDialog.tsx",lineNumber:251,columnNumber:21},void 0),e.jsxDEV(J,{direction:"row",justifyContent:"space-around",alignItems:"flex-end",spacing:1,children:e.jsxDEV("div",{style:{marginLeft:"428px"},children:[t.values.desc.length," of ",r," characters"]},void 0,!0,{fileName:"C:/Curately-aws-demo-test/curately-9.6.5/curately-9.6.5/src/components/shared/PhoneDialog/PhoneDialog.tsx",lineNumber:286,columnNumber:25},void 0)},void 0,!1,{fileName:"C:/Curately-aws-demo-test/curately-9.6.5/curately-9.6.5/src/components/shared/PhoneDialog/PhoneDialog.tsx",lineNumber:271,columnNumber:21},void 0)]},void 0,!0,{fileName:"C:/Curately-aws-demo-test/curately-9.6.5/curately-9.6.5/src/components/shared/PhoneDialog/PhoneDialog.tsx",lineNumber:250,columnNumber:17},void 0)},void 0,!1,{fileName:"C:/Curately-aws-demo-test/curately-9.6.5/curately-9.6.5/src/components/shared/PhoneDialog/PhoneDialog.tsx",lineNumber:247,columnNumber:13},void 0),e.jsxDEV(Q,{},void 0,!1,{fileName:"C:/Curately-aws-demo-test/curately-9.6.5/curately-9.6.5/src/components/shared/PhoneDialog/PhoneDialog.tsx",lineNumber:296,columnNumber:13},void 0),e.jsxDEV(O,{children:[e.jsxDEV(z,{insertSMSTemp:v,loadTemplates:w},void 0,!1,{fileName:"C:/Curately-aws-demo-test/curately-9.6.5/curately-9.6.5/src/components/shared/PhoneDialog/PhoneDialog.tsx",lineNumber:298,columnNumber:17},void 0),e.jsxDEV(G,{onInsertField:S},void 0,!1,{fileName:"C:/Curately-aws-demo-test/curately-9.6.5/curately-9.6.5/src/components/shared/PhoneDialog/PhoneDialog.tsx",lineNumber:299,columnNumber:17},void 0),e.jsxDEV(U,{message:t.values.desc,templateAdded:()=>V(a=>!a)},void 0,!1,{fileName:"C:/Curately-aws-demo-test/curately-9.6.5/curately-9.6.5/src/components/shared/PhoneDialog/PhoneDialog.tsx",lineNumber:300,columnNumber:17},void 0),e.jsxDEV(R,{variant:"contained",color:"primary",onClick:()=>{P()},children:"Send SMS"},void 0,!1,{fileName:"C:/Curately-aws-demo-test/curately-9.6.5/curately-9.6.5/src/components/shared/PhoneDialog/PhoneDialog.tsx",lineNumber:302,columnNumber:17},void 0)]},void 0,!0,{fileName:"C:/Curately-aws-demo-test/curately-9.6.5/curately-9.6.5/src/components/shared/PhoneDialog/PhoneDialog.tsx",lineNumber:297,columnNumber:13},void 0)]},void 0,!0,{fileName:"C:/Curately-aws-demo-test/curately-9.6.5/curately-9.6.5/src/components/shared/PhoneDialog/PhoneDialog.tsx",lineNumber:221,columnNumber:9},void 0)};export{fe as P};
